<?php

################################################################################
# PHP Suchscript - Version 2.5.32                                              #
# copyright webdesign weisshart                                                #
# http://webdesign.weisshart.de                                                #
# dieser copyright Hinweis darf nicht entfernt werden!                         #
#                                                                              #
# Sie koennen dieses Script kostenlos einsetzen,                               #
# solange Sie die Links auf webdesign.weisshart.de unveraendert intakt lassen. #
# Wenn Sie die Links auf webdesign.weisshart.de entfernen wollen,              #
# koennen Sie eine Lizenz erwerben bei                                         #
# http://webdesign.weisshart.de/suchen-lizenz.php                              #
################################################################################

include("search_config.php");

$NCiR0aW1lX29sZCA9IDA7IC8vIGb8ciBkaWUgRm9ydHNjaHJpdHRzYW56ZWlnZQNCiR0aW1lX29sZCA9IDA7IC8vIGb8ciBkaWUgRm9ydHNjaHJpdHRzYW56ZWlnZQ="Ly8gTmV0dCwgZGFzcyBTaWUgc2ljaCBmdWVyIG1laW5lbiBzb3VyY2Vjb2RlIGludGVyZXNzaWVyZW4uIERlciBMaW5rIGF1ZiB3ZWJkZXNpZ24ud2Vpc3NoYXJ0LmRlIGRhcmYgbnVyIG5hY2ggRXJ3ZXJiIGVpbmVyIExpemVueiBlbnRmZXJudCB3ZXJkZW4hCi8vIEBpbmlfc2V0KCdkaXNwbGF5X2Vycm9ycycsICcxJyk7CgoKc2V0bG9jYWxlIChMQ19DVFlQRSwgJ2RlX0RFJyk7IC8vIHN0cnRvbG93ZXIgYXVjaCBtaXQgVW1sYXV0ZW4gLSBhYmVyIGFuc2NoZWluZW5kIG5pY2h0IHVudGVyIFBIUCA1LjQKCgppZiAoIUBpbmlfZ2V0KCdzYWZlX21vZGUnKSkgQHNldF90aW1lX2xpbWl0KDQ1KTsKJG10aW1lID0gbWljcm90aW1lKCk7ICRtdGltZSA9IGV4cGxvZGUoICcgJywgJG10aW1lKTsgJG10aW1lID0gJG10aW1lWzFdICsgJG10aW1lWzBdOwokc3VjaF9zdGFydCA9ICRtdGltZTsKCiR2ZXJzaW9uPSAnPCEtLSBWZXJzaW9uIDIuNS4zMiAtLT4nOwoKCmlmIChwaHB2ZXJzaW9uKCkgPCAnNC4zLjAnKSB7CgllY2hvICI8cD5EaWVzZXMgU2NyaXB0IGVyZm9yZGVydCBQSFAgVmVyc2lvbiA0LjMuMCBvZGVyIGgmb3VtbDtoZXIhPGJyIC8+IjsKCWVjaG8gImF1ZiBJaHJlbSBTZXJ2ZXIgbCZhdW1sO3VmdCBhYmVyIFBIUCBWZXJzaW9uICIucGhwdmVyc2lvbigpLiIuPC9wPiI7CglleGl0Owp9CgokbWV0aG9kID0gJF9TRVJWRVJbJ1JFUVVFU1RfTUVUSE9EJ107CgokYXJyYXkgPSAiIjsKJGF1c2dhYmUgPSIiOwokZm91bmQgPSAwOwokZSA9ICIiOwokc29ydGhpbndlaXMgPSAiIjsKJGxpbmsgPSAiIjsKJGR1cmNoc3VjaHQgPSAwOwokYmVyZWl0c19mb3VuZCA9IGFycmF5KCk7IAoKCmlmICghaXNzZXQoJHBsdXJhbCkpewoJJHBsdXJhbCA9ICJuIjsKfQoKLy9pZiAoIWlzc2V0KCRwdW5jdCkpeyRwdW5jdCA9ICJubyI7fQoKaWYgKCFpc3NldCgkbWF4bXNnKSl7CgkkbWF4bXNnID0gMTAwOwp9CgppZiAoIWlzc2V0KCRkYXRlZm9ybSkpewoJJGRhdGVmb3JtID0gImRlIjsKfQoKaWYgKCFpc3NldCgkc3VjaGRhdWVyKSl7Cgkkc3VjaGRhdWVyID0gIlNla3VuZGVuIjsKfQoKaWYgKCFpc3NldCgkYmVzY2hyZWliKSl7CgkkYmVzY2hyZWliID0gIkJlc2NocmVpYnVuZzogIjsKfQoKaWYgKCFpc3NldCgkdHJlZmYpKXsKCSR0cmVmZiA9ICJUcmVmZmVyIjsKfQoKaWYgKCFpc3NldCgkZmlsZWRhdGUpKXsKCSRmaWxlZGF0ZSA9ICJ6dWxldHp0IGdlJmF1bWw7bmRlcnQgYW0gIjsKfQoKaWYgKCFpc3NldCgkbm9yZXN1bHQpKXsKCSRub3Jlc3VsdCA9ICI8cD48YnIgLz5FcyB3dXJkZW4gbGVpZGVyIGtlaW5lIGV4YWt0ZW4gJlV1bWw7YmVyZWluc3RpbW11bmdlbiBtaXQgZGVtIGVpbmdlZ2ViZW5lbiBTdWNoYmVncmlmZiBnZWZ1bmRlbi48YnIgLz5WaWVsbGVpY2h0IHdvbGxlbiBTaWUgZXMgbWl0IGVpbmVtIGFsbGdlbWVpbmVyZW4gU3VjaGJlZ3JpZmYgdmVyc3VjaGVuLjwvcD4iOwp9CgppZiAoIWlzc2V0KCR2b3JzY2hsYWcpKXsKCSR2b3JzY2hsYWcgPSAiT2RlciBTaWUgdmVyc3VjaGVuIGVzIGVpbmZhY2ggbWFsIG1pdCI7Cn0KCmlmICghaXNzZXQoJG1pbmxlbmd0aCkpewoJJG1pbmxlbmd0aCA9ICI8cD48YnIgLz5HZWJlbiBTaWUgYml0dGUgZWluZW4gU3VjaGJlZ3JpZmYgdm9uIG1pbmRlc3RlbnMmbmJzcDsiLiRsZW5ndGguIiZuYnNwO0J1Y2hzdGFiZW4gTCZhdW1sO25nZSBlaW4uPC9wPiI7Cn0KCgoKaWYgKCFpc3NldCgkaWZyYW1lKSl7CiAgICRpZnJhbWU9ZmFsc2U7Cn0KCmlmICghaXNzZXQoJHRhcmdldHdhaGwpKXsKICAgJHRhcmdldHdhaGw9ZmFsc2U7Cn0KCmlmICghaXNzZXQoJGV4Y2x1ZGVfc3RyaW5ncykpewogICAkZXhjbHVkZV9zdHJpbmdzID0gYXJyYXkoKTsKfQoKaWYgKCFpc3NldCgkaW5zdGFsbGF0aW9uX3BhdGgpKSB7CgkkaW5zdGFsbGF0aW9uX3BhdGggPSAid2R3X3N1Y2hlIjsKfQoKaWYgKCFpc3NldCgkZW5jb2RpbmcpKSB7CgkkZW5jb2RpbmcgPSAiSVNPIjsKfQoKaWYgKCFpc3NldCgkdGh1bWJfcmVwbGFjZSkpIHsKCSR0aHVtYl9yZXBsYWNlID0gIl9zcy5qcGciOwp9CgokbGlzdF9oeF9zdGFydCA9ICRsaXN0X2h4X2VuZCA9ICIiOwppZiAoaXNzZXQoJGxpc3RfaHgpICYmIGlzX251bWVyaWMoJGxpc3RfaHgpKSB7CgkkbGlzdF9oeF9zdGFydCA9ICc8aCcuJGxpc3RfaHguJz4nOwoJJGxpc3RfaHhfZW5kICAgPSAnPC9oJy4kbGlzdF9oeC4nPiAnOwp9CgppZiAoIWlzc2V0KCRoeF9zdWNodGlwKSB8fCAhaXNfbnVtZXJpYygkaHhfc3VjaHRpcCApKSB7CgkkaHhfc3VjaHRpcCA9IDM7Cn0KCgoKLy8gdmVyYm90ZW5lIFplaWNoZW4KJGV4Y2x1ZGVfc3RyaW5nczIgPSBhcnJheSgKICAgJ1xcJywgLy8gZGFzIFwgZGllbnQgenVtIE1hc2tpZXJlbiB2b24gcmVzZXJ2aWVydGVuIFplaWNoZW4gCgkiJyIsCiAgICcqJywKCSd8JywKICAgJysnCik7CgokZXhjbHVkZV9zdHJpbmdzX21lcmdlID0gYXJyYXlfbWVyZ2UoJGV4Y2x1ZGVfc3RyaW5ncywgJGV4Y2x1ZGVfc3RyaW5nczIpOwoKCmlmIChpc3NldCgkc3VjaHRpcDApKXsKCSRzZWFyY2h0aXAwID0gIlxuPGgkaHhfc3VjaHRpcCBpZD0nc3VjaHRpcGhlYWRlcic+JHN1Y2h0aXAwIDwvaCRoeF9zdWNodGlwPlxuIjsKCX0gZWxzZSB7Cgkkc2VhcmNodGlwMCA9ICJcbjxoJGh4X3N1Y2h0aXAgaWQ9J3N1Y2h0aXBoZWFkZXInPlN1Y2h0aXBwczogPC9oJGh4X3N1Y2h0aXA+XG4iOwp9CgppZiAoaXNzZXQoJHN1Y2h0aXAxKSl7Cgkkc2VhcmNodGlwMSA9ICI8bGk+JHN1Y2h0aXAxPC9saT5cbiI7Cgl9IGVsc2UgewoJJHNlYXJjaHRpcDEgPSAiPGxpPkRpZSBTdWNoZSBmaW5kZXQgYWxsZSBTZWl0ZW4sIGRpZSBJaHJlbiBTdWNoYmVncmlmZiBlbnRoYWx0ZW4gLSBhdWNoIGFscyBXb3J0YmVzdGFuZHRlaWwuIEVpbmUgU3VjaGUgbmFjaCAmcmFxdW87dGVzdCZsYXF1bzsgZmluZGV0IGFsc28gYXVjaCAmcmFxdW87c3AmYXVtbDs8ZW0+dGVzdDwvZW0+ZSZsYXF1bzsuPC9saT4iOwoJCn0KCmlmIChpc3NldCgkc3VjaHRpcDIpKXsKCSRzZWFyY2h0aXAyID0gIjxsaT4kc3VjaHRpcDI8L2xpPlxuIjsKCX0gZWxzZSB7Cgkkc2VhcmNodGlwMiA9ICI8bGk+V2VubiBTaWUgSWhyZSBTdWNoZSBhdWYgZ2FuemUgVyZvdW1sO3J0ZXIgZWluc2NociZhdW1sO25rZW4gd29sbGVuLCBmJnV1bWw7Z2VuIFNpZSB2b3IgdW5kIGhpbnRlciBkZW0gV29ydCBlaW4gTGVlcnplaWNoZW4gZWluLCB1bmQgdW1zY2hsaWUmc3psaWc7ZW4gYWxsZXMgbWl0IEFuZiZ1dW1sO2hydW5nc3plaWNoZW4uIEJlaXNwaWVsOiBcIiB0ZXN0IFwiLiAmcmFxdW87c3AmYXVtbDs8ZW0+dGVzdDwvZW0+ZSZsYXF1bzsgd2lyZCBkYW5uIG5pY2h0IG1laHIgZ2VmdW5kZW4uIDwvbGk+IjsKfQoKJHNlYXJjaHRpcDIgPSAiIjsKCmlmIChpc3NldCgkc3VjaHRpcDMpKXsKCSRzZWFyY2h0aXAzID0gIjxsaT4kc3VjaHRpcDM8L2xpPlxuIjsKCX0gZWxzZSB7CgkJJHNlYXJjaHRpcDMgPSAiPGxpPldlbm4gU2llIG1laHJlcmUgVyZvdW1sO3J0ZXIgZWluZ2ViZW4sIHdlcmRlbiBhbGxlIERva3VtZW50ZSBnZWZ1bmRlbiwgZGllIDxlbT5hbGxlPC9lbT4gZWluZ2VnZWJlbmVuIFcmb3VtbDtydGVyIGVudGhhbHRlbiwgZWdhbCBpbiB3ZWxjaGVyIFJlaWhlbmZvbGdlIChBTkQtVmVya24mdXVtbDtwZnVuZykuCgkJPGJyIC8+PGVtPkplIG1laHIgVyZvdW1sO3J0ZXIsIGRlc3RvIHdlbmlnZXIgVHJlZmZlci48L2VtPjwvbGk+IjsKfQoJCQppZiAoaXNzZXQoJHN1Y2h0aXAzMSkpewoJJHNlYXJjaHRpcDMxID0gIjxsaT4kc3VjaHRpcDMxPC9saT5cbiI7Cgl9IGVsc2UgewoJJHNlYXJjaHRpcDMxID0JIjxsaT5XZW5uIFNpZSBtZWhyZXJlIFcmb3VtbDtydGVyIFwibWl0IEFuZiZ1dW1sO2hydW5nc3plaWNoZW4gdW1zY2hsaWUmc3psaWc7ZW5cIiwgd2VyZGVuIGFsbGUgRG9rdW1lbnRlIGdlZnVuZGVuLCBkaWUgYWxsZSBlaW5nZWdlYmVuZW4gVyZvdW1sO3J0ZXIgZXhha3QgaW4gZGVyIGVpbmdlZ2ViZW5lbiBXZWlzZSBlbnRoYWx0ZW4uPC9saT4iOwp9CgppZiAoaXNzZXQoJHN1Y2h0aXAzb3IpKXsKCSRzZWFyY2h0aXAzb3IgPSAiPGxpPiRzdWNodGlwM29yPC9saT5cbiI7Cn0KCgppZiAoIWlzc2V0KCR3ZWl0ZXJ0eHQpKXsKCSR3ZWl0ZXJ0eHQgPSAid2VpdGVyZSBUcmVmZmVyIHplaWdlbiI7Cn0KaWYgKCFpc3NldCgkenVydWVja3R4dCkpewoJJHp1cnVlY2t0eHQgPSAidm9yaGVyaWdlIFRyZWZmZXIiOwp9CgoKaWYgKCFpc3NldCgkc2VhcmNoKSkgeyRzZWFyY2ggPSAkdmFsdWU7fQoKaWYgKCFpc3NldCgkc2hvd19leHQpKSB7JHNob3dfZXh0ID0gdHJ1ZTt9CgppZiAoIWlzc2V0KCRwcm90KSkgeyRwcm90ID0gImh0dHA6Ly8iO30KCgoKCgoKJHNlYXJjaHRpcDQgPSAiIjsKaWYgKCRqdW1wID09IHRydWUgJiYgJHRhcmdldCA9PSAiIikgewoKCWlmIChpc3NldCgkc3VjaHRpcDQpKXsKCQkkc2VhcmNodGlwNCA9ICI8bGk+JHN1Y2h0aXA0PC9saT5cbiI7CgkJfSBlbHNlIHsKCQkkc2VhcmNodGlwNCA9ICI8bGk+RmFsbHMgZGllIFN1Y2hlIG51ciBlaW5lbiBlaW56aWdlbiBUcmVmZmVyIGVyZ2lidCwgd2lyZCBkaWUgVHJlZmZlcnNlaXRlIGRpcmVrdCBhbmdlc3BydW5nZW4uPC9saT5cbiI7Cgl9Cn0KCi8vICR1bHN0YXJ0ID0gIiRzZWFyY2h0aXAwPGRpdiBpZD0nc3VjaHRpcHBzJyAgY2xhc3M9J2tsYXBwZW4nID5cbjx1bD5cbiI7Ci8vICR1bGVuZCA9ICI8L3VsPlxuPC9kaXY+XG4iOwovLwovLyBpZiAoJHRpcHBzKSB7JHNlYXJjaHRpcCA9ICR1bHN0YXJ0LiRzZWFyY2h0aXAxLiRzZWFyY2h0aXAyLiRzZWFyY2h0aXAzLiRzZWFyY2h0aXAzMS4kc2VhcmNodGlwM29yLiRzZWFyY2h0aXA0LiR1bGVuZDsgfWVsc2UgeyRzZWFyY2h0aXAgPSIiO30KCi8vIGJnIGZ1ZXIgQ3JlZGl0LUxpbms6CmlmICghaXNzZXQoJGJnKSkgJGJnID0gIiNGRkZGRkYiOwppZiAoc3RycG9zKCRiZywnIycpID09PSBmYWxzZSkgJGJnID0gJyMnLiRiZzsKCmlmIChwcmVnX21hdGNoKCcvXiNbMC05QS1GXXsxLDZ9JC9pJywgJGJnKSAmJiBzdHJsZW4oJGJnKSA9PSA3KSB7CgogICAgICAkcmVkSCA9IGJhc2VfY29udmVydChzdWJzdHIoJGJnLCAxLCAyKSwgMTYsIDEwKTsKICAgICAgJGdyZWVuSCA9IGJhc2VfY29udmVydChzdWJzdHIoJGJnLCAzLCAyKSwgIDE2LCAxMCk7CiAgICAgICRibHVlSCA9IGJhc2VfY29udmVydChzdWJzdHIoJGJnLCA1LCAyKSwgIDE2LCAxMCk7CgogICAgICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9BRVJUI2NvbG9yLWNvbnRyYXN0CiAgICAgICRzdW0gPSAkcmVkSCoyOTkgKyAkZ3JlZW5IKjU4NyArICRibHVlSCoxMTQ7CiAgICAgIGlmICgkc3VtIDwgMTI3MDAwICkgewogICAgICAgICAgICRjb21wID0gIiNGRkZGRkYiOwogICAgICB9IGVsc2UgewogICAgICAgICAgICRjb21wID0iIzAwMDAwMCI7CiAgICAgIH0KfSBlbHNlIHsKICAgICAgJGZlaGxlciA9IDE7CiAgICAgICRiZyA9ICIjRkZGRkZGIjsKICAgICAgJGNvbXAgPSAiIzAwMDAwMCI7Cn0KCiR3ZHcgPSAnPHAgc3R5bGU9ImRpc3BsYXk6YmxvY2sgIWltcG9ydGFudDsgZm9udC1zaXplOiAxMHB4ICFpbXBvcnRhbnQ7IGNvbG9yOicuJGNvbXAuJyAhaW1wb3J0YW50OyBiYWNrZ3JvdW5kOicuJGJnLicgIWltcG9ydGFudCI+Jm5ic3A7c2NyaXB0Jm5ic3A7JmNvcHk7Jm5ic3A7MjAxOCZuYnNwO2J5Jm5ic3A7PGEgc3R5bGU9ImNvbG9yOicuJGNvbXAuJyAhaW1wb3J0YW50OyBkaXNwbGF5OmlubGluZSAhaW1wb3J0YW50OyBmb250LXNpemU6IDEwcHggIWltcG9ydGFudDsgZm9udC13ZWlnaHQ6bm9ybWFsICFpbXBvcnRhbnQ7IHRleHQtZGVjb3JhdGlvbjpub25lICFpbXBvcnRhbnQiIGhyZWY9Imh0dHBzOi8vd2ViZGVzaWduLndlaXNzaGFydC5kZSI+d2ViZGVzaWduJm5ic3A7d2Vpc3NoYXJ0PC9hPjwvcD4nOwoKCmlmIChpc3NldCgkcHdkKSkgewoJJHNlcnZlciA9IHN0cl9yZXBsYWNlICgid3d3LiIsIiIsICRfU0VSVkVSWydTRVJWRVJfTkFNRSddICk7Cgkkc2VydmVyID0gc3RyX3JlcGxhY2UgKCIrIiwiIiwgJHNlcnZlcik7Cgkkc2VydmVyID0gc3RyX3JlcGxhY2UgKCItIiwiIiwgJHNlcnZlcik7CgkkZG9tID0gY3JjMzIoJHNlcnZlcik7CiAgICAgICRjaGF2ZSA9ICRwd2QgLyBzcHJpbnRmKCIldSIsICRkb20pOwp9CmlmIChpc3NldCgkY2hhdmUpICYmICRjaGF2ZSA9PSAiMzIxIil7Cgkkd2R3ID0nJzsKfQoKCi8vIG5ldWVzIEZlbnN0ZXIKZWNobycKPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgovKiA8IVtDREFUQVsgKi8KCmZ1bmN0aW9uIGxpbmtvcGVuZXIoYSkgewogICB2YXIgYj1hPyJfYmxhbmsiOiJfc2VsZiI7CiAgIHZhciBjPWRvY3VtZW50LmxpbmtzOwogICBmb3IodmFyIGk9MDtpPGMubGVuZ3RoO2krKykgewogICAJLy8gbnVyIFN1Y2h0cmVmZmVyOgogICAJaWYgKGNbaV0udG9TdHJpbmcoKS5pbmRleE9mKCJuZXh0IikgPT0gLTEgJiYgY1tpXS50b1N0cmluZygpLmluZGV4T2YoIj9xPSIpID4gLTEgKSB7CiAgICAgIAkJY1tpXS50YXJnZXQ9YjsKICAgCX0KICAgfQp9CgpmdW5jdGlvbiBsaW5rY29va2llKCkgewogICBpZihkb2N1bWVudC5jb29raWUuaW5kZXhPZigic3VjaG9lZmZuZW4iKSAhPT0gLTEpewogICAgICBkb2N1bWVudC5jb29raWUgPSAic3VjaD0wO3BhdGg9LztleHBpcmVzPVRodSwgMDEtSmFuLTcwIDAwOjAwOjAxIEdNVCI7CiAgIH0gZWxzZSB7CiAgICAgZG9jdW1lbnQuY29va2llPSJzdWNoPXN1Y2hvZWZmbmVuOyBwYXRoID0vIjsKICAgfQp9CgpmdW5jdGlvbiBhZGRFdmVudChvYmosIGV2VHlwZSwgZm4pewogaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKXsKICAgb2JqLmFkZEV2ZW50TGlzdGVuZXIoZXZUeXBlLCBmbiwgZmFsc2UpOwogICByZXR1cm4gdHJ1ZTsKIH0gZWxzZSBpZiAob2JqLmF0dGFjaEV2ZW50KXsKICAgdmFyIHIgPSBvYmouYXR0YWNoRXZlbnQoIm9uIitldlR5cGUsIGZuKTsKICAgcmV0dXJuIHI7CiB9IGVsc2UgewogICByZXR1cm4gZmFsc2U7CiB9Cn0KCi8qIF1dPiAqLwo8L3NjcmlwdD4KJzsKCgppZihpc3NldCgkX0dFVFsicSJdKSB8fCBpc3NldCgkX1BPU1RbInEiXSkpIHsKCWlmIChpc3NldCgkX0dFVFsicSJdKSAmJiAkX0dFVFsicSJdICE9ICIiKSAkc2VhcmNoID0gc3RyaXBzbGFzaGVzKCRfR0VUWyJxIl0pOwoJaWYgKGlzc2V0KCRfUE9TVFsicSJdKSAmJiAkX1BPU1RbInEiXSAhPSAiIikgJHNlYXJjaCA9IHN0cmlwc2xhc2hlcygkX1BPU1RbInEiXSk7CgoJJGdhbnplcmF1c2RydWNrID0gJHNlYXJjaDsKCWlmIChzdHJpc3RyKCRzZWFyY2gsICJDb250ZW50LVR5cGUiKSkkc2VhcmNoID0gIm5vIHNwYW0gaGVyZSEiOwoKCglpZiAoc3RycG9zKHN0cnRvbG93ZXIoJGVuY29kaW5nKSwidXRmIikhPT0gZmFsc2UpIHsKLy8JCWVjaG8gInV0Zi04OiI7CgkJJHNlYXJjaCA9IGh0bWxzcGVjaWFsY2hhcnMoJHNlYXJjaCwgRU5UX05PUVVPVEVTLCAiVVRGLTgiKTsKCX0gZWxzZSB7Ci8vCQllY2hvICJJU086IjsKCQkkc2VhcmNoID0gaHRtbHNwZWNpYWxjaGFycygkc2VhcmNoLCBFTlRfTk9RVU9URVMsICJJU08tODg1OS0xNSIpOwoJfQoKCWZvcmVhY2goJGV4Y2x1ZGVfc3RyaW5nc19tZXJnZSBhcyAkaykgewoJCSRnZXN1Y2h0ID0gc3RyX3JlcGxhY2UoJGssIiIsJHNlYXJjaCk7CgoJCS8qIHdlbm4gZXhjbHVkZWQgc3RyaW5ncyBpbSBTdWNoYmVncmlmZiwgdW5kIGRhZHVyY2ggU3VjaGJlZ3JpZmYga2xlaW5lciBhbHMgJGxlbmd0aCB3aXJkOiAqLwoJCWlmIChzdHJsZW4odHJpbSgkc2VhcmNoKSkgPiBzdHJsZW4odHJpbSgkZ2VzdWNodCkpICYmIHN0cmxlbih0cmltKCRzZWFyY2gpKSA+PSAkbGVuZ3RoICkgewoJCQkkbWlubGVuZ3RoID0gJG5vcmVzdWx0OyAKCQl9Cgl9CgkJCgkvLyBnYW56ZSBBdXNkcnVlY2tlIHN1Y2hlbjoKCSRhdXNkcnVjayA9IGZhbHNlOwoJaWYgKHN0cnBvcygkZ2FuemVyYXVzZHJ1Y2ssJyInKSAhPT0gZmFsc2UgfHwgc3RycG9zKCRnYW56ZXJhdXNkcnVjaywiJyIpICE9PSBmYWxzZSApIHsgCgkJJGF1c2RydWNrID0gdHJ1ZTsKCX0gCgkKCgkkc2VhcmNoID0gcHJlZ19yZXBsYWNlKCcvWyBdezIsfS9zbScsICcgJywgJHNlYXJjaCk7CgoKCWlmIChmaWxlX2V4aXN0cygic2VhcmNoX3JlcGxhY2UucGhwIikpIHtpbmNsdWRlICgic2VhcmNoX3JlcGxhY2UucGhwIik7fQoKCS8vIHVuZXJ3dWVuc2NodGUgU3RyaW5ncyB2b24gZGVyIFN1Y2hlIGF1c3NjaGxpZXNzZW4KCWZvcmVhY2goJGV4Y2x1ZGVfc3RyaW5nc19tZXJnZSBhcyAkaykgewoJCSRzZWFyY2ggPSBzdHJfcmVwbGFjZSgkaywiIiwkc2VhcmNoKTsKCX0KCgoJJHNlYXJjaCA9IHRyaW0oJHNlYXJjaCk7Cgkkc2VhcmNoID0gc3RyX3JlcGxhY2UgKCAnJmFtcDsnLCAnJicsICRzZWFyY2ggKTsgLy8gbGFlc3N0IGh0bWwgZW50aXRpZXMgd2llICYjMzUxOyB6dSAoei5CLiB0dWVya2lzY2hlIFNvbmRlcnplaWNoZW4pCgkvL2RpZSBnbGVpY2hlIFplaWxlIGF1Y2ggaW4gZGllIHN1Y2hlbi5waHAsIGF1c3NlcmRlbSBaZWlsZSA0OCBoaWVyIHdlZ2tvbW1lbnRpZXJlbi4KCgoJaWYoZW1wdHkoJHNlYXJjaCkpIHskc2VhcmNoPSIiO30KCSRzZWFyY2hsZW5ndGggPSBzdHJfcmVwbGFjZSgnJnF1b3Q7JywnJywkc2VhcmNoKTsKCWlmKHN0cmxlbigkc2VhcmNobGVuZ3RoKSA+PSAkbGVuZ3RoICYmICRzZWFyY2ggIT0gJHZhbHVlKSB7CgoJaWYgKCFpc3NldCgkc3VjaGhpbndlaXMpIHx8ICAkc3VjaGhpbndlaXMgPT0gIiIpIHsKCQkkc2VhcmNoaGlud2VpcyA9ICJTaWUgc3VjaGVuIG5hY2giOwoJfSBlbHNlIHsKCQkkc2VhcmNoaGlud2VpcyA9ICRzdWNoaGlud2VpczsKCQllY2hvICc8cD4nLiRzZWFyY2hoaW53ZWlzLicgPGVtPiZyYXF1bzsnLiRnZXN1Y2h0LicmbGFxdW87PC9lbT4nOwoJfQoKCS8vIGRpZSBGdW5rdGlvbiB6dW0gZXh0cmFoaWVyZW4gdm9uIFRlaWxzdHJpbmdzCglmdW5jdGlvbiBhdXNsZXNlbigkYWxsLCAkc3RhcnQsICRlbmQpIHsKCQlpZiAoc3RyaXN0cigkYWxsLCRzdGFydCkpIHsKCQkJJHN0YXJ0X3Bvcz1zdHJwb3Moc3RydG9sb3dlcigkYWxsKSxzdHJ0b2xvd2VyKCRzdGFydCkpICsgc3RybGVuKCRzdGFydCk7CgkJCSRyZXN0ID0gc3Vic3RyKCRhbGwsJHN0YXJ0X3Bvcyk7CgkJCSRlbmRfcG9zPXN0cnBvcyhzdHJ0b2xvd2VyKCRyZXN0KSxzdHJ0b2xvd2VyKCRlbmQpKTsKCQkJJGVyZyA9IHN1YnN0cigkcmVzdCwwLCRlbmRfcG9zKTsKCQkJcmV0dXJuICRlcmc7CgkJfQoJfQoKCgkvLyBkaWUgRnVua3Rpb24genVtIER1cmNoc3VjaGVuIGRlcyBWZXJ6ZWljaG5pc2JhdW1zOgoJaWYgKCFpc3NldCgkZXhjbHVkZV9kaXJzKSkgJGV4Y2x1ZGVfZGlycyA9IGFycmF5KCIiKTsKCglmdW5jdGlvbiB0cmVlKCRvcmRuZXIsICRzdWIgPSBGQUxTRSkgewoJCWdsb2JhbCAkZXJnZWI7CgkJJGhhbmRsZSA9IG9wZW5kaXIoJG9yZG5lcik7CgkJd2hpbGUgKGZhbHNlICE9PSAoJGZpbGUgPSByZWFkZGlyICgkaGFuZGxlKSkpIHsKCQkJaWYoJGZpbGUgIT0gIi4iICYmICRmaWxlICE9ICIuLiIgJiYgaXNfZGlyKCRvcmRuZXIuIi8iLiRmaWxlKSkgewoJCQkJJGNvbXBsID0gJG9yZG5lci4iLyIuJGZpbGUuIi8iOwoJICAgICAgIAkJJGVyZ2ViID0gJGVyZ2ViLiIsIi4kY29tcGw7CiAgICAgICAgCQl0cmVlKCRvcmRuZXIuIi8iLiRmaWxlLCBUUlVFKTsKCQkJfQoJCX0KCSAgCWNsb3NlZGlyKCRoYW5kbGUpOwoJfQoKCWlmICgkYWxsZWRpcnMpIHsKCSAgIHRyZWUoIi4iKTsKCSAgICRlcmdlYiA9ICIuLyIuJGVyZ2ViOwoJICAgJGRpcnMgPSBleHBsb2RlICgiLCIsICRlcmdlYik7Cgl9CgoJZm9yZWFjaCgkZGlycyBhcyAkZGlyKSB7CgkJaWYoIWluX2FycmF5KCRkaXIsJGV4Y2x1ZGVfZGlycykpIHsKCQkkdmVyeiA9IG9wZW5kaXIoJGRpcik7CgoJCXdoaWxlKCRmaWxlID0gcmVhZGRpcigkdmVyeikpIHsKCgkJaWYoJGZpbGUgIT0gIi4iICYmICRmaWxlICE9ICIuLiIgJiYgJGZpbGUgIT0gIi5odGFjY2VzcyIpIHsKCgkJJGR1cmNoc3VjaHQgPSAkZHVyY2hzdWNodCArIDE7CgkJLy8gZWluemVsbmUgRGF0ZWllbiB2b24gZGVyIFN1Y2hlIGF1c3NjaGxpZXNzZW4KCQkvLyBkaWUgZm9sZ2VuZGVuIDggWmVpbGVuIGVybGF1YmVuIEF1c2NobHVzcyB2b24gU3Vic3RyaW5ncyBpbiAkZXhjbHVkZV9maWxlcwoJCSRub2xpc3Q9ZmFsc2U7CgkJZm9yICgkZT0wOyRlPGNvdW50KCRleGNsdWRlX2ZpbGVzKTskZSsrKSB7CgkJCSRwb3MgPSBzdHJwb3MoJGZpbGUsJGV4Y2x1ZGVfZmlsZXNbJGVdKTsKCQkJaWYgKCRwb3MgIT09IGZhbHNlKSB7CgkJCQkkbm9saXN0ID0gdHJ1ZTsKCQkJfQoJCX0gCgkJCgkJaWYoJG5vbGlzdCAhPT0gdHJ1ZSAmJiBwcmVnX21hdGNoKCI9KFwuJGRhdF90eXBlKSQ9IiwkZmlsZSkpIHsKCgkJCS8vIE1ldGEtQW5nYWJlbiBlcm1pdHRlbG4KCQkJJHRpdGVsID0gIiI7CgkJCSRrZXl3b3JkcyA9ICIiOwoJCQkkZGVzY3JpcHRpb24gPSAiIjsKCQkJJGdtdGFycmF5PWdldF9tZXRhX3RhZ3MoJGRpci4kZmlsZSk7CgkJCQkKCQkJd2hpbGUobGlzdCgka2V5MSwkdmFsKT1lYWNoKCRnbXRhcnJheSkpewoJCQkJc3dpdGNoKHN0cnRvbG93ZXIoJGtleTEpKXsKCQkJCQljYXNlICJ0aXRsZSI6ICR0aXRlbD0kdmFsOyBicmVhazsKCQkJCQljYXNlICJrZXl3b3JkcyI6ICRrZXl3b3Jkcz0kdmFsOyBicmVhazsKCQkJCQljYXNlICJkZXNjcmlwdGlvbiI6ICRkZXNjcmlwdGlvbj0kdmFsOyBicmVhazsKCQkJCX0KCQkJfQoKCQkJJHN0cmluZzEgPSAkc3RyaW5nID0gZmlsZV9nZXRfY29udGVudHMoJGRpci4kZmlsZSk7CgkJCQkKCQkJJHN0cmluZyA9IHN0cl9yZXBsYWNlKCImbmJzcDsiLCIgIiwkc3RyaW5nKTsgLy8gd2VpbCBzb25zdCAmbHQ7Jm5ic3A7IGFscyBsaW1pdC1lbmQgd2lya3Q/Pz8KCQkJCgkJCSRzdHJpbmcgPSBwcmVnX3JlcGxhY2UoJyNbXHNdezIsfSNzJywgJyAnLCAkc3RyaW5nKTsgLy8gbWVocmVyZSBMZWVyemVpY2hlbiBpbiBlaW5zIHVtd2FuZGVsbgoJCQkKCQkJLy8gd2VpbCBhbnNvbnN0ZW4gZWluICZsdDsgaW0gUXVlbGx0ZXh0IGRlbiBTdWNoYmVyZWljaCBiZWVuZGV0OgoJCQkkc3RyaW5nID0gc3RyX3JlcGxhY2UoIiZsdDsiLCIiLCRzdHJpbmcpOwoJCQkKCQkJaWYgKGZpbGVfZXhpc3RzKCJ0YXJnZXRfcmVwbGFjZS5waHAiKSkge2luY2x1ZGUgKCJ0YXJnZXRfcmVwbGFjZS5waHAiKTt9CgkJCQoJCgkJCS8vIGRhbWl0IHdlcmRlbiBnYW56ZSBXb2VydGVyIGdlZnVuZGVuLCBhdWNoIHdlbm4gc2llIGluIFRhZ3MgZWluZ2VzY2hsb3NzZW4gc2luZDoKCQkJJHN0cmluZyA9IHN0cl9yZXBsYWNlKCI8IiwiIDwiLCRzdHJpbmcpOwoJCQkkc3RyaW5nID0gc3RyX3JlcGxhY2UoIj4iLCI+ICIsJHN0cmluZyk7CgoJCQkvLyBodG1sIHRhZ3MgbWl0IGVpbmdlc2NobG9zc2VuZW4gcGhwIHRhZ3MgcmF1cyAtIHdlaWwgc29uc3QgZWluIGVpbnplbG5lcyA8IG9kZXIgJmx0OyBhbHMgZW5kIHdpcmt0CiAgCQkJJHN1Y2htdXN0ZXIgPSAiLzxcP1tePl0rXD8+LyI7IAogIAkJCSRzdHJpbmcgPSBwcmVnX3JlcGxhY2UoJHN1Y2htdXN0ZXIsIiIsJHN0cmluZyk7CgoKLy9lY2hvICRlbmNvZGluZzsKCQkJaWYgKHN0cnBvcyhzdHJ0b2xvd2VyKCRlbmNvZGluZyksInV0ZiIpIT09IGZhbHNlKSB7CgkJCQkkc3RyaW5nID0gaHRtbF9lbnRpdHlfZGVjb2RlKCRzdHJpbmcsIEVOVF9OT1FVT1RFUywgIlVURi04Iik7CgkJCX0gZWxzZSB7CgkJCQkkc3RyaW5nID0gaHRtbF9lbnRpdHlfZGVjb2RlKCRzdHJpbmcsIEVOVF9OT1FVT1RFUywgIklTTy04ODU5LTEiKTsKCQkJfQogICAgICAgICAgICAJLy8gbnVyIGZ1ZXIgd2R3IGR5bi4gZGVzY3JpcHRpb25zOgogICAgICAgICAgICAJaWYgKCRfU0VSVkVSWydTRVJWRVJfTkFNRSddID09ICJ3ZWJkZXNpZ24ud2Vpc3NoYXJ0LmRlIikgewogICAJCQkJaWYgKCRkZXNjcmlwdGlvbiA9PSAiIil7CiAgIAkJCQkJJGRlc2NyaXB0aW9uID0gYXVzbGVzZW4oJHN0cmluZzEsICJkZXNjcmlwdGlvbiIsICciOycpOwoJCQkJCSRkZXNjcmlwdGlvbiA9IHN0cmlwX3RhZ3MoJGRlc2NyaXB0aW9uKTsKCQkJCQkkZGVzY3JpcHRpb24gPSBwcmVnX3JlcGxhY2UoIi9cbnxccnxjb250ZW50fFwifD18XC98XD8vIiwgIiIsICRkZXNjcmlwdGlvbik7CiAgIAkJCQl9CiAgICAgICAgICAgIAl9CgoJCQkvLyB1bmQgd2VpbCA8dGl0bGU+IG5pY2h0IGltbWVyIGFscyBNZXRhLXRhZyBjb2RpZXJ0IHdpcmQ6CgkJCWlmICgkdGl0ZWwgPT0gIiIpICR0aXRlbCA9IGF1c2xlc2VuKCRzdHJpbmcsICI8dGl0bGU+IiwgIjwvdGl0bGU+Iik7CgoJCQkvLyB3ZWlsIGVzIExldXRlIGdpYnQsIGRpZSBtZXRhIFRhZ3MgbWl0IFplaWxlbnVtYnJ1Y2ggc2NocmVpYmVuOgoJCQkkZGVzY3JpcHRpb24gPSBzdHJfcmVwbGFjZSgiXG4iLCIiLCRkZXNjcmlwdGlvbik7CgkJCSRrZXl3b3JkcyA9IHN0cl9yZXBsYWNlKCJcbiIsIiIsJGtleXdvcmRzKTsKCQkJJHRpdGVsID0gc3RyX3JlcGxhY2UoIlxuIiwiIiwkdGl0ZWwpOwoKCQkJLy8gRGF0ZWllbiBudXIgendpc2NoZW4gZGVuIGJlaWRlbiBsaW1pdGVyIHRhZ3MgYXVzd2VydGVuOgoJCQlpZiAoJGxpbWl0X3N0YXJ0ICE9ICIiKSB7CgkJCQkvLyBXdXJkZSBuZWVkbGUgbmljaHQgZ2VmdW5kZW4sIGdpYnQgc3RycG9zKCkgZGVuIGJvb2xlYW4tV2VydCBGQUxTRSB6dXLDg8K8Y2suCgkJCQlpZiAoc3RycG9zKHN0cnRvbG93ZXIoJHN0cmluZyksc3RydG9sb3dlcigkbGltaXRfc3RhcnQpKSAhPT0gZmFsc2UpIHsKCQkJCQkkcG9zPXN0cnBvcyhzdHJ0b2xvd2VyKCRzdHJpbmcpLHN0cnRvbG93ZXIoJGxpbWl0X3N0YXJ0KSkgKyBzdHJsZW4oJGxpbWl0X3N0YXJ0KTsKCQkJCQkkc3Vic3RyaW5nX3Jlc3QgPSBzdWJzdHIoJHN0cmluZywkcG9zKTsKCQkJCX0gZWxzZSB7CgkJCQkJaWYgKGlzc2V0KCRsaW1pdF9vbmx5KSAmJiAkbGltaXRfb25seSA9PT0gdHJ1ZSkgeyRzdWJzdHJpbmdfcmVzdCA9ICIiO30gLy9kYW1pdCBicmljaHQgZGllIFN1Y2hlIGFiLCB3ZW5uICRsaW1pdF9zdGFydCBuaWNodCBnZWZ1bmRlbiB3aXJkLgoJCQkJCWVsc2UgeyRzdWJzdHJpbmdfcmVzdCA9ICRzdHJpbmc7fQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJJHN1YnN0cmluZ19yZXN0ID0gJHN0cmluZzsKCQkJfQoKCQkJLy8gd2VubiAkbGltaXRfZW5kIGdlc2V0enQ6CgkJCWlmICgkbGltaXRfZW5kICE9ICIiKSB7CgkJCQkkZW5kX3Bvcz1zdHJwb3Moc3RydG9sb3dlcigkc3Vic3RyaW5nX3Jlc3QpLHN0cnRvbG93ZXIoJGxpbWl0X2VuZCkpOwoJCQkJaWYgKCRlbmRfcG9zICE9PSBmYWxzZSkgewoJCQkJCSRzdHJpbmcgPSBzdWJzdHIoJHN1YnN0cmluZ19yZXN0LDAsJGVuZF9wb3MpOwoJCQkJfSBlbHNlIHsKCQkJCQkkc3RyaW5nID0gJHN1YnN0cmluZ19yZXN0OwoJCQkJfQogICAgICAgICAgICAgCX0gZWxzZSB7CgkJCQkkc3RyaW5nID0gJHN1YnN0cmluZ19yZXN0OwogICAgICAgICAgICAgCX0KCgoJCQkvL0luaGFsdCB2b24gdGFncyBhdXN3ZXJ0ZW46CgkJCWlmICgkdGFncz09PWZhbHNlKSAJJHN0cmluZyA9IHN0cmlwX3RhZ3MoJHN0cmluZyk7CgoJCQkvLyBkaWUgbWV0YSB0YWdzIGluIGRpZSBTdWNoZSBlaW5zY2hsaWVzc2VuIGdlbWFlc3MgY29uZmlnOgogICAgICAgICAgICAJaWYgKCR0YWdzID09PSB0cnVlKSB7JGtleT10cnVlOyAkZGVzYz10cnVlOyAkdGl0PXRydWU7fQoJCQlpZiAoJGtleSA9PT0gdHJ1ZSkgJHN0cmluZz0kc3RyaW5nLiRrZXl3b3JkczsKCQkJaWYgKCRkZXNjID09PSB0cnVlKSAkc3RyaW5nPSRzdHJpbmcuJGRlc2NyaXB0aW9uOwoJCQlpZiAoJHRpdCA9PT0gdHJ1ZSkgJHN0cmluZz0kc3RyaW5nLiR0aXRlbDsKCgkJCSRzdHJpbmcgPSBzdHJfcmVwbGFjZSgiXG4iLCAiICIsICRzdHJpbmcpOwoKCQkJJHN0cmluZyA9IHN0cl9yZXBsYWNlKCJ0aXRsZT4iLCAiIiwgJHN0cmluZyk7IC8vIHdlbm4gVHJlZmZlciBpbiA8dGl0bGU+IHdpcmQgdGl0bGU+IGFuZ2V6ZWlndD8KCgkJCQoJCQkvLyB1bmVyd3VlbnNjaHRlIFN0cmluZ3Mgdm9uIGRlciBTdWNoZSBhdXNzY2hsaWVzc2VuCgkJCWZvcmVhY2goJGV4Y2x1ZGVfc3RyaW5nc19tZXJnZSBhcyAkaykgewoJCQkJJHN0cmluZyA9IHN0cl9yZXBsYWNlKCRrLCIiLCRzdHJpbmcpOwoJCQl9CQkJCgoKICAgICAgICAgICAJCS8vIEUtTWFpbHMgcmF1czogaHR0cDovL3d3dy5yZWd1bGFyLWV4cHJlc3Npb25zLmluZm8vZW1haWwuaHRtbAogICAgICAgICAgICAJJHN1Y2htdXN0ZXIgPSAnL1xiW0EtWjAtOS5fJSstXStAW0EtWjAtOS4tXStcLltBLVpdezIsNH1cYi9pJzsKICAgICAgICAgICAgCSRzdHJpbmcgPSBwcmVnX3JlcGxhY2UoJHN1Y2htdXN0ZXIsJycsICRzdHJpbmcpOwoKCQkJaWYgKGZ1bmN0aW9uX2V4aXN0cygnbWJfc3RydG9sb3dlcicpKXsKCQkJCWlmIChtYl9kZXRlY3RfZW5jb2RpbmcoJHNlYXJjaCwgJ1VURi04JywgdHJ1ZSkgIT09IGZhbHNlKSB7IC8vbnVyIHNvIGbDvHIgUEhQIDcKCQkJCQkkc3RyaW5nbG93ID0gbWJfc3RydG9sb3dlcigkc3RyaW5nLCdVVEYtOCcpOwoJCQkJCSRzZWFyY2hsb3cgPSBtYl9zdHJ0b2xvd2VyKCRzZWFyY2gsJ1VURi04Jyk7CgkJCQl9IGVsc2UgewoJCQkJCSRzdHJpbmdsb3cgPSBzdHJ0b2xvd2VyKCRzdHJpbmcpOwoJCQkJCSRzZWFyY2hsb3cgPSBzdHJ0b2xvd2VyKCRzZWFyY2gpOwkKCQkJCX0KCQkJfSBlbHNlIHsKCQkJCSRzdHJpbmdsb3cgPSBzdHJ0b2xvd2VyKCRzdHJpbmcpOwoJCQkJJHNlYXJjaGxvdyA9IHN0cnRvbG93ZXIoJHNlYXJjaCk7CgkJCX0KCQkJCgoJCQkvLyB3ZWlsIHN0cnRvbG93ZXIgdW50ZXIgUEhQIDUuNCBhbnNjaGVpbmVuZCBuaWNodCBtZWhyIHR1dAoJCQkkdW1sYXV0X2dyb3NzID0gYXJyYXkoJ8OEJywnw5YnLCfDnCcpOwoJCQkkdW1sYXV0X2tsZWluID0gYXJyYXkoJ8OkJywnw7YnLCfDvCcpOwoJCQkkc2VhcmNobG93ID0gc3RyX3JlcGxhY2UoJHVtbGF1dF9ncm9zcywgJHVtbGF1dF9rbGVpbiwgJHNlYXJjaGxvdyk7CgkJCSRzdHJpbmdsb3cgPSBzdHJfcmVwbGFjZSgkdW1sYXV0X2dyb3NzLCAkdW1sYXV0X2tsZWluLCAkc3RyaW5nbG93KTsKCgkJCSMgZGllIHVuZC1WZXJrbnVlcGZ1bmc6CgkJCSRvciA9IGZhbHNlOyAKCgkJCWlmICgoc3RycG9zKCRzZWFyY2hsb3csIiBvciAiKSAhPT0gZmFsc2UgfHwgc3RycG9zKCRzZWFyY2hsb3csIiBvZGVyICIpICE9PSBmYWxzZSkgJiYgIGlzc2V0KCRzdWNodGlwM29yKSAmJiAkYXVzZHJ1Y2sgIT09IHRydWUgKSB7IC8vIFVtc2NoYWx0ZW4gdm9uIHVuZCBhdWYgb3IgCgkJCQkkb3IgPSB0cnVlOwoJCQkJJHNlYXJjaGxvdyA9IHN0cl9yZXBsYWNlKCIgb3IgIiwgIiAiLCAkc2VhcmNobG93KTsKCQkJCSRzZWFyY2hsb3cgPSBzdHJfcmVwbGFjZSgiIG9kZXIgIiwgIiAiLCAkc2VhcmNobG93KTsKCQkJfQoJCQkJCgkJCSMgV29ydGdydXBwZW4KCQkJaWYgKCRhdXNkcnVjayAhPT0gZmFsc2UpIHsKCQkJCSRzZWFyY2hsb3cgPSBzdHJfcmVwbGFjZSgnJnF1b3Q7JywnJywkc2VhcmNobG93KTsKCQkJCSRzZWFyY2hsb3cgPSBzdHJfcmVwbGFjZSgnIicsJycsJHNlYXJjaGxvdyk7CgkJCQkkc2VhcmNoX2FyclswXSA9ICRzZWFyY2hsb3c7CgoJCQl9IGVsc2UgewoJCQkJJHNlYXJjaF9hcnIgPSBleHBsb2RlKCIgIiwkc2VhcmNobG93KTsKCQkJfQoJCQkkc2VhcmNoX2NvdW50ID0gY291bnQoJHNlYXJjaF9hcnIpOwoKCgoJCQkkaT0wOwoJCQlmb3JlYWNoICgkc2VhcmNoX2FyciBhcyAkc2VhcmNoX3dvcmQpIHsKCQkJCWlmIChAc3RycG9zKCRzdHJpbmdsb3csJHNlYXJjaF93b3JkKSAhPT0gZmFsc2UpIHsJIAkvLyB3ZW5uIFN1Y2hiZWdyaWZmIHZvcmtvbW10LCBzY2huZWxsZXIgYWxzIHByZWdfbWF0Y2gJCQkJCgkJCQkJJGkrKzsKCgoJCQkJCWlmICgkb3IgPT09IHRydWUpIHskaSA9ICRzZWFyY2hfY291bnQgPSAxO30gLy8gZGVyIEhhY2ssIHVtIGJlaSBPUiBuaWNodCB6dSB3YXJ0ZW4sIGJpcyBhbGxlIFN1Y2hiZWdyaWZmZSBnZWZ1bmRlbiB3ZXJkZW4KCgkJCQkJaWYgKCRpPT0kc2VhcmNoX2NvdW50KSB7CQkvLyBzb2JhbGQgYWxsZSBTdWNoYmVncmlmZmUgZ2VmdW5kZW4gd3VyZGVuLi4uCgkJCQkJCQoJCQkJCQkkc3RyaW5nbG93ID0gc3RyaXBfdGFncygkc3RyaW5nbG93KTsKCgkJCQkJCSR0ZXN0ID0gQHN1YnN0cl9jb3VudCgkc3RyaW5nbG93LCAkc2VhcmNoX3dvcmQpOwoKCQkJCQkJaWYgKCRzZWFyY2hfY291bnQgPiAxKXsKCQkJCQkJCSRwb3M9c3RycG9zKCRzdHJpbmdsb3csJHNlYXJjaF93b3JkKTsKCQkJCQkJfSBlbHNlIHsKCQkJCQkJCSRwb3M9c3RycG9zKCRzdHJpbmdsb3csJHNlYXJjaGxvdyk7CgkJCQkJCX0KCgoJCQkJCQlpZiAoJHZvciA+PSAkcG9zKSB7CgkJCQkJCQkkcGllY2UxID0gc3Vic3RyKCRzdHJpbmcsMCwkbmFjaCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQkkcGllY2UxID0gc3Vic3RyKCRzdHJpbmcsJHBvcy0kdm9yLCR2b3IrJG5hY2gpOwoKCQkJCQkJCSRwaWVjZTEgPSBzdHJzdHIgKCRwaWVjZTEsIiAiKTsgLy8gdmVybWVpZGV0IEJydWNoc3R1ZWNrZSB2b24gV29lcnRlcm4gYW0gQW5mYW5nIGRlcyBLb250ZXh0CgkJCQkJCX0KCgoKCQkJCQkJJHBpZWNlMSA9IHN1YnN0cigkcGllY2UxLCAwLCBzdHJsZW4oc3RycmNocigkcGllY2UxLDMyKSkqKC0xKSkuIiAuLi4iOyAvLyB2ZXJtZWlkZXQgQnJ1Y2hzdHVlY2tlIHZvbiBXb2VydGVybiBhbSBFbmRlIGRlcyBLb250ZXh0CgkJCQkJCSRyZXN0ID0gIjxiciAvPiRwaWVjZTEiOwoKCgoKCQkJCQkJJGZpbGVmb3JzaXplID0gJGZpbGU7CgkJCQkJCWlmICgkc2hvd19leHQgIT09IHRydWUpIHsKCQkJCQkJCSRpbmZvID0gcGF0aGluZm8oJGZpbGUpOwoJCQkJCQkJJGZpbGUgPSAgYmFzZW5hbWUoJGZpbGUsJy4nLiRpbmZvWydleHRlbnNpb24nXSk7CgkJCQkJCX0KCgoJCQkJCQlpZigkdm9yPT0iMCIgJiYgJG5hY2g9PSIwIikgJHJlc3QgPSAiIjsKCgkgICAgICAgICAgICAgICAgICAgIGlmKCEkZGVzY3JpcHRpb24gPT0gIiIgJiYgJHNob3dfZGVzYyA9PSB0cnVlKSAkcmVzdCA9ICI8YnIgLz48c3Ryb25nPiRiZXNjaHJlaWI8L3N0cm9uZz4gJGRlc2NyaXB0aW9uIjsKCQkJCQkJaWYoJGZpbGVuYW1lKSAkdGl0ZWwgPSAkZmlsZTsKCgkJCQkJCWlmIChpc3NldCgkY2hhdmUpICYmICRjaGF2ZSA9PSAiMzIxIil7CgkJCQkJCQkvLyB1bmRvY3VtZW50ZWQ6IG51ciBkaXIgemVpZ2VuCgkJCQkJCQlpZiAoaXNzZXQoJHNob3dfZGlyX29ubHkpICYmICRzaG93X2Rpcl9vbmx5ID09PSB0cnVlKSB7CgkJCQkJCQkJJGxhc3RfZGlyID0gZXhwbG9kZSgnLycsICRkaXIpOwoJCQkJCQkJCSR4ID0gYXJyYXlfa2V5cygkbGFzdF9kaXIpOwoJCQkJCQkJCSRsYXN0X2tleSA9IGVuZCgkeCkgLTE7CgkJCQkJCQkJJHRpdGVsID0gJGxhc3RfZGlyWyRsYXN0X2tleV07CgkJCQkJCQkJJGZpbGU9IiI7CgkJCQkJCQl9CgkJCQkJCX0KCgkJCQkJCWlmKCR0aXRlbCA9PSAiIikgJHRpdGVsID0gJGZpbGU7CgoKCQkJCQkJaWYgKGlzc2V0KCRxdWVyeSkpewoJCQkJCQkJJHFkaXIgPSBzdHJfcmVwbGFjZSgiLi8iLCIiLCRkaXIpOyAvLyBlbnRmZXJudCBkYXMgZnVlaHJlbmRlIC4vIGJlaW0gcXVlcnkgc3RyaW5nCiAgICAgICAgICAgICAgICAgICAgICAgICAJaWYgKGlzc2V0KCRxdWVyeV9lbmR1bmcpICYmICRxdWVyeV9lbmR1bmcgPT0gIm5vIikgewogICAgICAgICAgICAgICAgICAgICAgICAgIAkJJGZleHQgID0gYXJyYXlfcG9wKGV4cGxvZGUoJy4nLCAkZmlsZSkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmbmFtZSA9IGJhc2VuYW1lKCRmaWxlLCAnLicuJGZleHQpOwoJCQkJCQkJICAgICRsaW5rID0gJHF1ZXJ5LiRxZGlyLiRmbmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgCX0gZWxzZSB7CgkJCQkJCQkJJGxpbmsgPSAkcXVlcnkuJHFkaXIuJGZpbGU7CiAgICAgICAgICAgICAgICAgICAgICAgCQl9CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQkkbGluayA9ICRkaXIuJGZpbGU7CgkJCQkJCX0KCgkJCQkJCWlmIChpc3NldCgkcXVlcnkpKXsKCQkJCQkJCWlmICgkYXVzZHJ1Y2sgPT09IHRydWUpIHsKCQkJCQkJCQkkbGluayA9ICRsaW5rLicmcT0lMjInLiRzZWFyY2hsb3cuJyUyMic7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCSRsaW5rID0gJGxpbmsuIiZxPSIuJHNlYXJjaGxvdzsKCQkJCQkJCX0KCQkJCQkJfSBlbHNlIHsKCQkJCQkJCWlmICgkYXVzZHJ1Y2sgPT09IHRydWUpIHsKCQkJCQkJCQkkbGluayA9ICRsaW5rLic/cT0lMjInLiRzZWFyY2hsb3cuJyUyMic7CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCSRsaW5rID0gJGxpbmsuIj9xPSIuJHNlYXJjaGxvdzsKCQkJCQkJCX0KCQkJCQkJfQoKCgkJCQkJCQkKCgkJCQkJCWlmICgkX1NFUlZFUlsnU0VSVkVSX05BTUUnXSA9PSAid2ViZGVzaWduLndlaXNzaGFydC5kZSIpIHsKCQkJICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgIAkJCS8vIFVtbGVpdGVuIHZvbiBLb21tZW50YXJlbiBhdWYgZGVuIEFydGlrZWw6CiAgICAgICAgICAgICAgICAgIAkJCWlmIChzdHJwb3MoJGxpbmssJ2NvbW1lbnQnKSAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICAgICAgICAgCQkJJHRpdGVsID0gc3RyX3JlcGxhY2UoImNvbW1lbnRfIiwiIiwkdGl0ZWwpOwogICAgICAgICAgICAgICAgICAgICAJCQkkdGl0ZWwgPSBzdHJfcmVwbGFjZSgiLnhtbCIsIi5waHAiLCR0aXRlbCk7CiAgICAgICAgICAgICAgICAgICAgIAkJCSR0aXRlbCA9ICdLb21tZW50YXIgYXVmIGRlciBTZWl0ZSAnLiR0aXRlbDsKICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIAkJCSRsaW5rID0gc3RyX3JlcGxhY2UoImNvbW1lbnRfIiwiIiwkbGluayk7CiAgICAgICAgICAgICAgICAgICAgIAkJCSRsaW5rID0gc3RyX3JlcGxhY2UoIi54bWwiLCIucGhwIiwkbGluayk7CiAgICAgICAgICAgICAgICAgIAkJCX0KCiAgICAgICAgICAgICAgICAgIAkJCS8vIEpldHp0IFVtbGVpdGVuIHZvbiBtZC1UZXh0ZmlsZXMgYXVmIGRlbiBBcnRpa2VsOgogICAgICAgICAgICAgICAgICAJCQlpZiAoc3RycG9zKCRsaW5rLCcvbWFya2Rvd24vJykgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgIAkJCSRsaW5rID0gc3RyX3JlcGxhY2UoIm1hcmtkb3duLyIsIiIsJGxpbmspOwogICAgICAgICAgICAgICAgICAgICAJCQkkbGluayA9IHN0cl9yZXBsYWNlKCJfdGV4dC50eHQiLCIucGhwIiwkbGluayk7CiAgICAgICAgICAgICAgICAgICAgIAkJCSRsaW5rID0gc3RyX3JlcGxhY2UoInBiXyIsIiIsJGxpbmspOwoJCQkgICAJCQkJCSR0aXRlbCA9IHN0cl9yZXBsYWNlKCIuLyIsIiIsJGxpbmspOyAKICAgICAgICAgICAgICAgICAgCQkJfQoJCQkJCQl9CgkJCQkJCQoJCQkJCQlpZiAoaXNzZXQoJGNoYXZlKSAmJiAkY2hhdmUgPT0gIjMyMSIpewoJCQkJICAJCQkvLyBVbWxlaXRlbiB2b24gSW5jbHVkZS1EYXRlaWVuOgoJCQkJICAJCQlpZiAoaXNzZXQoJHJlZGlyX3N1ZmZpeCkgJiYgaXNzZXQoJHJlZGlyX3JlcGxhY2UpKSB7CiAgICAgICAgICAgICAgICAgICAgIAkJCSR0aXRlbCA9IHN0cl9yZXBsYWNlKCRyZWRpcl9zdWZmaXgsJHJlZGlyX3JlcGxhY2UsJHRpdGVsKTsKICAgICAgICAgICAgICAgICAgICAgCQkJJGxpbmsgPSBzdHJfcmVwbGFjZSgkcmVkaXJfc3VmZml4LCRyZWRpcl9yZXBsYWNlLCRsaW5rKTsKCQkJCSAgCQkJfQkJCQkKCQkJCQkJfQoJCQkJCQkKCQkJCQkJaWYoJHRpdGVsICE9ICIiKSB7CgkJCQkJCQkKCQkJCQkJCSR0aXRlbCA9IHRyaW0oJHRpdGVsKTsKCgkJCQkJCQlpZiAoJHRhcmdldCA9PSAiYmxhbmsiKSB7CgkJCQkJCQkJJHppZWwgPSAnIHRhcmdldD0iX2JsYW5rIic7CgkJCQkJCQkJJGp1bXAgPSBmYWxzZTsKCQkJCQkJCX0gZWxzZWlmICgkdGFyZ2V0ID09ICJwYXJlbnQiKSB7CgkJCQkJCQkJJHppZWwgPSAnIHRhcmdldD0iX3BhcmVudCInOwoJCQkJCQkJCSRqdW1wID0gZmFsc2U7CgkJCQkJCQl9IGVsc2VpZiAoJHRhcmdldCAhPSAiIikgewoJCQkJCQkJCSR6aWVsID0gJyB0YXJnZXQ9IicuJHRhcmdldC4nIic7CgkJCQkJCQkJJGp1bXAgPSBmYWxzZTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJJHppZWwgPSAnJzsKCQkJCQkJCX0KCgkJCQkJCQkvLyB1bSBkZW4gVVJJLVBhcmFtZXRlciBxPSB6dSB1bnRlcmRyw7xja2VuID0+IGRhbm4gZ2VodCAkdGFyZ2V0d2FobCBuYXTDvHJsaWNoIG5pY2h0IG1laHIsIHdlaWwgbGlua29wZW5lciBpbiBzZWFyY2gucGhwICI/cT0iIGFiZnJhZ3QKCQkJCQkJCWlmIChpc3NldCgkcXVlcnlzdHJpbmcpICYmICRxdWVyeXN0cmluZyA9PT0gdHJ1ZSkgeyRsaW5rID0gc3RyX3JlcGxhY2UoJz9xPScuJHNlYXJjaGxvdywnJywkbGluayk7fQoJCQkJCQkJaWYgKCRwZmFkID09IHRydWUpIHsKCQkJCQkJCQkKCQkJCQkJCQlpZiAoaXNzZXQoJHF1ZXJ5KSl7CgkJICAgICAgICAgICAgICAgICAgICAgICAgCSR1cmwgPSAiIDxhIGhyZWY9XCIiLiRsaW5rLiJcIiIuJHppZWwuIj4iLiRwcm90LiRwZmFkaW5mby4kbGluay4iPC9hPiAiOwoJCQkJCQkJCX0gZWxzZSB7CgoJCQkJCQkJLy8kbGlua19hbnogPSBzdHJfcmVwbGFjZSgnI3dkd19zdWNoZScsJycsJGxpbmspOwoJCQkJCQkJJGxpbmtfYW56ID0gc3RyX3JlcGxhY2UoJyUyMicsJycsJGxpbmspOwoJCQkJCQkJJGxpbmtfYW56ID0gc3RyX3JlcGxhY2UoJz9xPScuJHNlYXJjaGxvdywnJywkbGlua19hbnopOwoJCQkJCQkJJGxpbmtfYW56ID0gc3RyX3JlcGxhY2UoJy4uLycsJy8nLCRsaW5rX2Fueik7CgkJCQkJCQkkbGlua19hbnogPSBzdHJfcmVwbGFjZSgnLi8nLCcvJywkbGlua19hbnopOwoJCQkJCQkJaWYgKHN0cnBvcyAoJGxpbmssJy4uJykgIT09IGZhbHNlKSB7JHBmYWRpbmZvID0gc3RyX3JlcGxhY2UoJHAyLCcnLCRwZmFkaW5mbyk7fQoJCQkJCQkJCQkKCQkJCQkJCS8vICR1cmwgPSAiIDxhIGhyZWY9XCIiLiRsaW5rLiJcIiIuJHppZWwuIj4iLiRwcm90LiRwZmFkaW5mby5zdWJzdHIoJGxpbmssMSkuIjwvYT4gIjsKCQkgICAgICAgICAgICAgICAgICAgICAgICAJJHVybCA9ICIgPGEgaHJlZj1cIiIuJGxpbmsuIlwiIi4kemllbC4iPiIuJHByb3QuJHBmYWRpbmZvLiRsaW5rX2Fuei4iPC9hPiAiOwoJCQkJCQkJCX0KCSAgICAgICAgICAgICAgICAgICAJCX0gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAJCSR1cmwgPSAiIjsKCSAgICAgICAgICAgICAgICAgICAgICAgCX0KCgkgICAgICAgICAgICAgICAgICAgCQlpZiAoJGFlbmRfZGF0ID09IHRydWUpIHsKCQkJCQkJCQlpZiAoJGRhdGVmb3JtID09ICJlbiIpIHsKCQkJCQkJCQkJQCRtb2QgPSAkZmlsZWRhdGUuZGF0ZSgibS9kL3kiLCBmaWxlbXRpbWUoJGRpci4kZmlsZWZvcnNpemUpKTsKCQkJCQkJCQkKCQkJCQkJCQl9IGVsc2VpZiAoJGRhdGVmb3JtID09ICJkZSIgfHwgJGRhdGVmb3JtID09ICIiIHx8ICFpc3NldCgkZGF0ZWZvcm0pKSB7CgkJCQkJCQkJCUAkbW9kID0gJGZpbGVkYXRlLmRhdGUoImQubS55IiwgZmlsZW10aW1lKCRkaXIuJGZpbGVmb3JzaXplKSk7CgkJCQkJCQkJfSBlbHNlIHsKCQkJCQkJCQkJQCRtb2QgPSAkZmlsZWRhdGUuZGF0ZSgkZGF0ZWZvcm0sIGZpbGVtdGltZSgkZGlyLiRmaWxlZm9yc2l6ZSkpOwoJCQkJCQkJCX0KCQkJCQkJCQkkbW9kID0gIjxzcGFuIGNsYXNzPSdtb2QxJz4iLiRtb2QuIjwvc3Bhbj4iOwoJCQkJCQkJfSBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgCQkkbW9kID0gIiI7CgkgICAgICAgICAgICAgICAgICAgIAl9CgoJCQkJCQkJLy8gZWluIFRodW1iIGVpbmJpbmRlbiwgd2VubiBlaW5lIEdyYWZpay1EYXRlaSBtaXQgZ2xlaWNoZW0gRGF0ZWluYW1lbiBpbSBPcmRuZXIgbGllZ3QKCQkJCQkJCQoJCQkJCQkJJHRodW1iID0gJyc7CgkJCQkJCQlpZiAoaXNzZXQoJGNoYXZlKSAmJiAkY2hhdmUgPT0gIjMyMSIpIHsKCQoJCQkJCQkJCSRleHRlbnNpb25zID0gYXJyYXkoIi5odG0iLCIuaHRtbCIsIi5zaHRtbCIsIi5waHAiLCIucGhwMyIsIi5waHA0IiwiLnBocDUiLCAiLnBkZiIpOwoJCQkJCQkJCSR0aHVtYiA9IHN0cl9yZXBsYWNlKCRleHRlbnNpb25zLCR0aHVtYl9yZXBsYWNlLCRsaW5rKTsKCQkJCQkJCX0KCgkJCQkJCQkkaW1nbGluayA9ICIiOwoJCQkJCQkJCSR0aHVtYiA9IHN0cnRvaygkdGh1bWIsICc/Jyk7CgkJCQkJCQkJaWYgKGZpbGVfZXhpc3RzKCR0aHVtYikgJiYgJHRodW1iICE9ICRsaW5rKSB7CgkJCQkJCQkJCSRpbWdsaW5rID0gJzxhIGhyZWYgPSInLiRsaW5rLiciIGFyaWEtaGlkZGVuPSJ0cnVlIj48aW1nIHNyYz0iJy4kdGh1bWIuJyIgYWx0PSJTeW1ib2wgZGVyIFNlaXRlICIvPjwvYT4nOwoJCQkJCQkJCX0KCgkgICAgICAgICAgICAgICAgCQkkdHJlZmZfYW56PSIiOwoJICAgICAgICAgICAgICAgICAgCQlpZigkdHJlZmZlciAmJiAkdGVzdD49MSkgJHRyZWZmX2Fuej0iPHNwYW4gY2xhc3M9J3RyZWZmZXInPlsiLiR0ZXN0LiImbmJzcDsiLiR0cmVmZi4iXTwvc3Bhbj4iOwoKCQkJCQkvLyBzbyBrYW5uIG1hbiBhbHBoYWJldGlzY2ggc29ydGllcmVuOiAoTmVnZXJ0cmljaykKCQkJCQlpZiAoaXNzZXQoJGFscGhhc29ydCkgJiYgJGFscGhhc29ydCA9PT0gdHJ1ZSkgeyR0ZXN0ID0gJHRpdGVsO30KCgkJCQkJLy8gVHJlZmZlciBiZWkgb3IgbnVyIGVpbm1hbCBhdWZsaXN0ZW4KCQkJCQlpZiAoIWluX2FycmF5KCRsaW5rLCAkYmVyZWl0c19mb3VuZCkpIHsKCQkJCQkJaWYgKCRvciA9PT0gdHJ1ZSkgeyRiZXJlaXRzX2ZvdW5kW10gPSAkbGluazt9IAoKICAgICAgICAgICAgICAgICAgICAgIAkJCWlmICgkcGZhZCB8fCAkYWVuZF9kYXQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgCQkJaWYgKCRpZnJhbWUgIT09IHRydWUpIHsgCiAgICAgICAgICAgICAgICAgICAgICAgICAJCQkJJGFycmF5IC49ICR0ZXN0LiRpbWdsaW5rLiI8YSBocmVmPVwiIi4kbGluay4iXCIiLiR6aWVsLiI+Ii4kdGl0ZWwuIjwvYT4gIi4kbGlzdF9oeF9lbmQuJHRyZWZmX2Fuei4kcmVzdC4iPHNwYW4gY2xhc3M9J21vZCc+Ii4kdXJsLiI8L3NwYW4+Ii4kbW9kLiJcbiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIAkJCX0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgIAkJCQkkYXJyYXkgLj0gIiRsaW5rXG4iOwogICAgICAgICAgICAgICAgICAgICAgIAkJCQl9CiAgICAgICAgICAgICAgICAgICAgIAkJCX0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIAkJCWlmICgkaWZyYW1lICE9PSB0cnVlKSB7IAogICAgICAgICAgICAgICAgICAgICAgICAgCQkJCSRhcnJheSAuPSAkdGVzdC4kaW1nbGluay4iPGEgaHJlZj1cIiIuJGxpbmsuIlwiIi4kemllbC4iPiIuJHRpdGVsLiI8L2E+ICIuJGxpc3RfaHhfZW5kLiR0cmVmZl9hbnouJHJlc3QuIlxuIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAJCX0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgCQkJCQkkYXJyYXkgLj0gIiRsaW5rXG4iOwogICAgICAgICAgICAgICAgICAgICAgICAgCQkJfQogICAgICAgICAgICAgICAgICAgICAgICAJCX0KCQkJCQkJJGZvdW5kICsrOwoJCQkJCX0KCgoJICAgICAgICAgICAgICAgCQkJLy8kZm91bmQgKys7CgoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfQoJfQoJfQoJCglAY2xvc2VkaXIoJHZlcnopOwoKCX0KZWNobyAnPC9wPic7CmlmICgkc2VhcmNoID09ICLCp2ZvdW5kIikge2VjaG8gJyYjODM7dSYjOTk7aCYjMTE1O2MmIzExNDtpJiMxMTI7dCAmIzE2OTsgMiYjNDg7MDUgJiMxMTk7ZSYjOTg7ZCYjMTAxO3MmIzEwNTtnbiYjNDY7JiMxMTllJiMxMDU7cyYjMTE1O2gmIzk3O3ImIzExNjsmIzQ2OyYjMTAwO2UnO2V4aXQ7fQoKCi8vIExvZ2RhdGVpIHNjaHJlaWJlbiB1bmQgQmVuYWNocmljaHRpZ3VuZ3MtTWFpbCBtaXQgaXAgLSBTcGVycmU6CgovLyBpcCBhbm9ueW1pc2llcmVuOgokcmVsb2FkX2lwID0gJF9TRVJWRVJbIlJFTU9URV9BRERSIl07CiRpcF9hcnJheSA9IGV4cGxvZGUoIi4iLCRyZWxvYWRfaXApOwokcmVsb2FkX2lwID0gJGlwX2FycmF5WzBdLiIuIi4kaXBfYXJyYXlbMV0uIi4iLiRpcF9hcnJheVsyXS4iLnh4eCI7CgoKZnVuY3Rpb24gc2NocmVpYmVuKCRkYXRlaSwkbW9kZSl7CglnbG9iYWwgJHNlYXJjaCwgJHJlbG9hZF9pcDsKCSRmcCA9IEBmb3BlbigkZGF0ZWksJG1vZGUpOwoJZmxvY2soJGZwLExPQ0tfRVgpOwoJZndyaXRlKCRmcCwkcmVsb2FkX2lwLiJ8Ii50aW1lKCkuInwiLiRzZWFyY2guIlxuIik7CglmbG9jaygkZnAsTE9DS19VTik7CglmY2xvc2UoJGZwKTsKfQoKCmZ1bmN0aW9uIGlwX3NwZXJyZSgpIHsKCWdsb2JhbCAkc2VhcmNoLCAkcmVsb2FkbGltaXQsICRpbnN0YWxsYXRpb25fcGF0aCwkcmVsb2FkX2lwOwoJJHJlbG9hZGxvZ2RhdGVpID0gJGluc3RhbGxhdGlvbl9wYXRoLicvcmVsb2FkLnR4dCc7CgkkYW56YWhsZWludHJhZWdlID0gMTAwOwoKCS8vIFBydWVmZW4sIG9iIHJlbG9hZGRhdGVpIGV4aXN0aWVydCA9PiBhbnNvbnN0ZW4gRXJzdGVsbGVuCgoJaWYoIWZpbGVfZXhpc3RzKCRyZWxvYWRsb2dkYXRlaSkpIHsKCQkkZGF0ZWkgPSBmb3BlbigkcmVsb2FkbG9nZGF0ZWksIncrIik7CgkJZmNsb3NlKCRkYXRlaSk7Cgl9CgoJJGZwID0gZmlsZSgkcmVsb2FkbG9nZGF0ZWkpOwoJJHNpemUgPSBzaXplb2YoJGZwKTsKCSRhdXNnYWJlID0gZmFsc2U7CgkvLyBEYXRlaSBzY2hyZWliZW4sIHdlbm4gTGlzdGUgdm9sbDoKCWlmKCRzaXplID49ICRhbnphaGxlaW50cmFlZ2UpewoJCXNjaHJlaWJlbigkcmVsb2FkbG9nZGF0ZWksInciKTsKCgkvLyBQcnVlZmVuLCBvYiBlaW5lIElQIGluIGRlciBMaXN0ZSBzdGVodAoJfSBlbHNlIHsKCQlmb3IgKCRpPTA7JGk8JHNpemU7JGkrKykgewogICAgICAJCSR6ZWlsZSA9IGV4cGxvZGUoInwiLCRmcFskaV0pOwoKCgoKCQkJaWYgKCR6ZWlsZVsxXSA+IHRpbWUoKS0zIHx8CgkJCQkJCgkJCSR6ZWlsZVswXSA9PSAkcmVsb2FkX2lwICYmICR6ZWlsZVsxXSA+IHRpbWUoKS02IHx8CgkJCSR6ZWlsZVswXSA9PSAkcmVsb2FkX2lwICYmIHRyaW0oJHplaWxlWzJdKSA9PSAkc2VhcmNoICYmICR6ZWlsZVsxXSA+ICh0aW1lKCktJHJlbG9hZGxpbWl0KSkgeyAvLyBnbGVpY2hlIElQLCByZWxvYWRsaW1pdCB1bmQgZ2xlaWNoZXIgU3VjaGJlZ3JpZmYKCQkJCSRhdXNnYWJlID0gdHJ1ZTsKICAgICAgCQl9CgkJfQoJCS8vIFByb3Rva29sbGllcnQgZGllIElQLUFkcmVzc2UgKHNjaHJlaWJ0KToKCQlzY2hyZWliZW4oJHJlbG9hZGxvZ2RhdGVpLCJhKyIpOwoJfQoKCglyZXR1cm4gQCRhdXNnYWJlOwp9CgovLyBqZXR6dCBMb2dmaWxlIHVuZCBCZW5hY2hyaWNodGlndW5ncy1NYWlsIHNjaHJlaWJlbjoKCmlmKGlwX3NwZXJyZSgpPT09ZmFsc2UpIHsKCgkvLyBCZW5hY2hyaWNodGlndW5ncyBNYWlsOgoJaWYgKGZ1bmN0aW9uX2V4aXN0cygnbWJfc3RydG9sb3dlcicpKXsKCQlpZiAobWJfZGV0ZWN0X2VuY29kaW5nKCRzZWFyY2gsICdVVEYtOCcsIHRydWUpICE9PSBmYWxzZSkgeyAvL251ciBzbyBmw7xyIFBIUCA3CgkJCSRzdWNoYmVncmlmZl9tYWlsID0gaHRtbHNwZWNpYWxjaGFycygkc2VhcmNoLCBFTlRfTk9RVU9URVMsICJVVEYtOCIpOwoJCQkkc3VjaGJlZ3JpZmZfbG9nID0gdXRmOF9kZWNvZGUoJHN1Y2hiZWdyaWZmX21haWwpOwoJCX0gZWxzZSB7CgkJCSRzdWNoYmVncmlmZl9tYWlsID0gaHRtbHNwZWNpYWxjaGFycygkc2VhcmNoLCBFTlRfTk9RVU9URVMsICJJU08tODg1OS0xNSIpOwoJCQkkc3VjaGJlZ3JpZmZfbG9nID0gJHN1Y2hiZWdyaWZmX21haWw7CQoJCX0gCgl9IGVsc2UgewoJCSRzdWNoYmVncmlmZl9tYWlsID0gaHRtbHNwZWNpYWxjaGFycygkc2VhcmNoLCBFTlRfTk9RVU9URVMsICJJU08tODg1OS0xNSIpOwoJCSRzdWNoYmVncmlmZl9sb2cgPSAkc3VjaGJlZ3JpZmZfbWFpbDsKCX0KCQoJJGhlYWRlciA9ICdGcm9tOiAnLiRhZG1pbmFkZHJlc3MuJycgLiAiXHJcbiIgLidYLU1haWxlcjogUEhQLycgLiBwaHB2ZXJzaW9uKCk7CgkKCWlmKCRtYWlsID09IHRydWUgJiYgJHNlYXJjaCAhPSAkdmFsdWUpIHsKCQlpZiAoISRzZW5kZXIpIHskc2VuZGVyID0gIlN1Y2hzY3JpcHQiO30KCQltYWlsKCRhZG1pbmFkZHJlc3MsIlN1Y2hlIGF1ZiAkc2VpdGUiLCIkc2VuZGVyIFxuXG5Gb2xnZW5kZXIgQmVncmlmZiB3dXJkZSBzb2ViZW4gYXVmIGRlciBTZWl0ZSAkc2VpdGUgZ2VzdWNodDogXG4kc3VjaGJlZ3JpZmZfbWFpbFxuVHJlZmZlcjogJGZvdW5kIiwkaGVhZGVyKTsKCX0KCgkvLyBMb2dmaWxlIHNjaHJlaWJlbjoKCSR0b2RheSA9IGRhdGUoImQubS5ZIEg6aSAiKTsKCSRubCA9ICR0b2RheS4kc3VjaGJlZ3JpZmZfbG9nLiIoIi4kZm91bmQuIilcbiI7CgkkbGluZXMgPSBmaWxlKCRpbnN0YWxsYXRpb25fcGF0aC4nL3NlYXJjaGxvZy50eHQnKTsKCSRsaW5lcyA9IGFycmF5X3VuaXF1ZSgkbGluZXMpOyAvLyBEdXBsaWthdGUgbG9lc2NoZW4KCgkvLyBXZW5uIG1laHIgYWxzICRtYXhtc2cgKGRlZmF1bHQ6MTAwKSBMb2dlaW50cmFlZ2UgYWVsdGVzdGUgbG9lc2NoZW46CgkvLyAkbWF4bXNnID0gMTAwOwoJaWYoY291bnQoJGxpbmVzKSA+ICRtYXhtc2cpIHVuc2V0KCRsaW5lc1swXSk7CgoJJG5sID0gaW1wbG9kZSgiIiwgJGxpbmVzKS4kbmw7CgogCgkkZnAyID0gZm9wZW4oJGluc3RhbGxhdGlvbl9wYXRoLicvc2VhcmNobG9nLnR4dCcsICd3YicpOwoJZmxvY2soJGZwMixMT0NLX0VYKTsKCWZ3cml0ZSgkZnAyLCAkbmwpOwoJZmxvY2soJGZwMixMT0NLX1VOKTsKCWZjbG9zZSgkZnAyKTsKfQoKCgoJaWYoJGZvdW5kID09ICIwIikJewoJCWVjaG8gJG5vcmVzdWx0OwoJCWlmIChzdHJsZW4oJHNlYXJjaCkgPiAkbGVuZ3RoICYmICR2b3JzY2hsYWcgIT0gIiIpIHsgCgoJCQkkc3luID0gc3RyX3JlcGxhY2UoJyZxdW90OycsJycsJHNlYXJjaCk7CgkJCSRzeW4gPSBzdHJfcmVwbGFjZSgnIicsJycsJHNlYXJjaCk7CgkJCgkJCWlmIChzdHJwb3Moc3RydG9sb3dlcigkZW5jb2RpbmcpLCJ1dGYiKSE9PSBmYWxzZSkgewoJCQkJJHN5biA9IG1iX3N1YnN0cih0cmltKCRzeW4pLDAsJGxlbmd0aCwndXRmLTgnKTsKCQkJfSBlbHNlIHsKCQkJCSRzeW4gPSBzdWJzdHIodHJpbSgkc3luKSwwLCRsZW5ndGgpOwoJCQl9CgoJCQllY2hvICI8cD4kdm9yc2NobGFnIDxhIGhyZWYgPVwiIi4gYmFzZW5hbWUoJF9TRVJWRVJbJ1BIUF9TRUxGJ10pLiI/cT0kc3luJmFtcDtnZWdlbj0mYW1wO2RhdGU9Ii50aW1lKCkuIlwiPiRzeW48L2E+LjwvcD4iOwoJCX0KCX0KCglpZigkZm91bmQgPT0gIjEiICYmICRqdW1wID09IHRydWUgJiYgJF9TRVJWRVJbJ1BIUF9TRUxGJ10gIT0gc3Vic3RyKCRsaW5rLDEpKQl7IC8vZGFzIFN1Y2hzY3JpcHQgc2VsYnN0IGRhcmYgbmljaHQgYW5nZXNwcnVuZ2VuIHdlcmRlbjogRW5kbG9zc2NobGVpZmUKICAJCSRsaW5rID0gc3Vic3RyKCRsaW5rLDEpOwkvL2RlbiBQdW5rdCB2b3IgZGVtIGRpciB3ZWcKCQkkbGluayA9IHN0cl9yZXBsYWNlKCc/cT0nLiRzZWFyY2hsb3csJycsJGxpbmspOwoKCQkkc2VhcmNoID0gc3RyX3JlcGxhY2UoJyZxdW90OycsJyInLCRzZWFyY2gpOyAvLyB3ZWdlbiBzZWFyY2h0ZXJtLmpzCgkJCgkJLy8gZG9wcGVsdGUgc2xhc2ggdm9yIERhdGVpbmFtZW4gdW50ZXJkcnVlY2tlbgoJCSRkaXJuYW1lID0gZGlybmFtZSgkX1NFUlZFUlsnUEhQX1NFTEYnXSk7CgkJaWYoJGRpcm5hbWUgPT0gIi8iKSAkZGlybmFtZSA9ICIiOwoJCS8vIGJhY2tzbGFzaCB2b24gV2luZG93cyBTZXJ2ZXJuIHJhdXM6CgkJJGRpcm5hbWUgPSBzdHJfcmVwbGFjZSgiXFwiLCIiLCRkaXJuYW1lKTsKCgoKCQlpZiAoaXNzZXQoJHF1ZXJ5KSl7CgkJCWhlYWRlcigiTG9jYXRpb246IC8vIi4kX1NFUlZFUlsnSFRUUF9IT1NUJ10uJGRpcm5hbWUuIi8iLiRsaW5rLiImcT0iLiRzZWFyY2gpOwoJCX0gZWxzZSB7CgkJCWhlYWRlcigiTG9jYXRpb246IC8vIi4kX1NFUlZFUlsnSFRUUF9IT1NUJ10uJGRpcm5hbWUuJGxpbmsuIj9xPSIuJHNlYXJjaCk7CgkJfQoJCWV4aXQ7CgoJfQoKCWlmKCRmb3VuZCA+ICIxIikgewogICAgICAgICRuID0gJHBsdXJhbDsgJGUgPSAiZSI7ICRzID0gInMiOwoJfSBlbHNlIHsKICAgIAkkZSA9ICRuID0gJHMgPSAiIjsKCX0KCglpZigkZm91bmQgPj0gIjEiKSB7CgoJCSRhcnJheSA9IGV4cGxvZGUoIlxuIiwgJGFycmF5KTsKCQlpZiAoaXNzZXQoJGFscGhhc29ydCkgJiYgJGFscGhhc29ydCA9PT0gdHJ1ZSkgewoJCQlzb3J0KCRhcnJheSk7CgkJfSBlbHNlIHsKCQkJbmF0c29ydCgkYXJyYXkpOwoJCX0KCQlyZXNldCgkYXJyYXkpOwoJCWlmICghaXNzZXQoJHJldmVyc2Vzb3J0KSkgeyRhcnJheSA9IGFycmF5X3JldmVyc2UoJGFycmF5KTt9CgogICAgICAkaSA9ICRhbnpfZGF0OwoKCiAgICAgIC8vIGFuc3RlbGxlIGRlciB3aGlsZSBlaW4gZm9yIFNjaGxlaWZlLCB3ZW5uIGljaCB3ZWl0ZXJlIFNlaXRlbiBhbnplaWdlbiB3aWxsOgogICAgICAkbmV4dD0wOwogICAgICBpZihpc3NldCgkX0dFVFsibmV4dCJdKSB8fCBpc3NldCgkX1BPU1RbIm5leHQiXSkpIHsKICAgICAgICAgICAgaWYgKGlzc2V0KCRfR0VUWyJuZXh0Il0pICYmICRfR0VUWyJuZXh0Il0gIT0gIiIpICRuZXh0ID0gJF9HRVRbIm5leHQiXTsKICAgICAgICAgICAgaWYgKGlzc2V0KCRfUE9TVFsibmV4dCJdKSAmJiAkX1BPU1RbIm5leHQiXSAhPSAiIikgJG5leHQgPSAkX1BPU1RbIm5leHQiXTsKICAgICAgfQogICAgICAKICAgICAgJG5leHQxPSRuZXh0KzE7CiAgICAgICR3ZWl0ZXI9JG5leHQrJGFuel9kYXQ7CiAgICAgIGZvcigkY291bnQgPSAwICsgJG5leHQ7ICRjb3VudCA8ICRhbnpfZGF0ICsgJG5leHQ7ICRjb3VudCsrKSB7CiAgICAgICAgIGlmICgkaWZyYW1lICE9PSB0cnVlKSB7IAoKCiAgICAgICAgICAgIGlmIChAJGFycmF5WyRjb3VudF0pICRhdXNnYWJlIC49ICI8bGk+Ii4kbGlzdF9oeF9zdGFydC5zdWJzdHIoc3Ryc3RyKCRhcnJheVskY291bnRdLCAnPGEgaHJlZicpLDApLiI8L2xpPlxuIjsKICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKEAkYXJyYXlbJGNvdW50XSkgJGF1c2dhYmUgLj0gIjxpZnJhbWUgY2xhc3M9J3NlYXJjaGlmcmFtZScgc3JjPSciLiRhcnJheVskY291bnRdLiInPjwvaWZyYW1lPlxuIjsKICAgICAgICAgfQoJCiAgICAgIH0KCQoJCglpZiAoIWlzc2V0KCRmb3VuZHR4dDEpKXskZm91bmR0eHQxID0gIklociBTdWNoYmVncmlmZiB3dXJkZSAiO30KCWlmICghaXNzZXQoJGZvdW5kdHh0MikpeyRmb3VuZHR4dDIgPSAiU2VpdGUiO30KCWlmICghaXNzZXQoJGZvdW5kdHh0MykpeyRmb3VuZHR4dDMgPSAiIGdlZnVuZGVuLiI7fQoJJGxlZXIgPSAiICI7CglpZiAoJGZvdW5kdHh0MyA9PSIiKSB7JGxlZXIgPSAiIjt9CgoJCWVjaG8gJzxwPicuJGZvdW5kdHh0MS4nPHN0cm9uZz4gJy4kZm91bmQuJyA8L3N0cm9uZz4nLiRmb3VuZHR4dDIuJG4uJGxlZXIuJGZvdW5kdHh0MzsKCiAgICAgIGlmICgkbmV4dCA9PSAwKSB7CiAgICAgICAgICAgIGlmICgkYW56X2RhdCA8ICRmb3VuZCkgewogICAgICAJCQlpZiAoaXNzZXQoJGFuZ2V6ZWlndHR4dCkpewogICAgICAgICAJCQkJZWNobyAkYW5nZXplaWd0dHh0OwogICAgICAJCQl9IGVsc2UgewogICAgICAgICAJCQkJZWNobyAiPGJyIC8+QW5nZXplaWd0IHdlcmRlbiA8c3Ryb25nPiRhbnpfZGF0PC9zdHJvbmc+IEVyZ2Vibmlzc2UgcHJvIFNlaXRlIjsKICAgICAgCQkJfQogICAgICAJCX0KCi8vICAgICAgCQlpZigkdHJlZmZlciAmJiAkZm91bmQgPiAxICYmICRvciA9PT0gZmFsc2UpIHsgCgkgICAgICAJaWYoJHRyZWZmZXIgJiYgJGZvdW5kID4gMSkgeyAKICAgICAgCQkJaWYgKGlzc2V0KCRzb3J0dHh0KSl7CiAgICAgIAkJCQkkc29ydGhpbndlaXMgPSAkc29ydHR4dDsKICAgICAgCQkJfSBlbHNlIHsKICAgICAgCQkJCSRzb3J0aGlud2VpcyA9ICIsIHNvcnRpZXJ0IG5hY2ggW0FuemFobCZuYnNwO2RlciZuYnNwO1RyZWZmZXImbmJzcDtwcm8mbmJzcDtEb2t1bWVudF0iOwogICAgICAJCQl9CiAgICAgIAkJfSAKCQkJZWNobyAiJHNvcnRoaW53ZWlzLiI7CiAgICAgIH0KICAgICAgZWNobyAiPC9wPiI7CgovLyBOZXVlcyBGZW5zdGVyCmlmICgkdGFyZ2V0ID09ICIiICYmICR0YXJnZXR3YWhsID09IHRydWUpIHsKZWNobycKPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgovKiA8IVtDREFUQVsgKi8KaWYoZG9jdW1lbnQuY29va2llLmluZGV4T2YoXCdzdWNob2VmZm5lblwnKSAhPT0gLTEpewogICBhZGRFdmVudCh3aW5kb3csIFwnbG9hZFwnLCBsaW5rb3BlbmVyKTsKICAgZG9jdW1lbnQud3JpdGUgKFwnPGZvcm0gYWN0aW9uPSIiPjxwIGNsYXNzPSJsaW5rb3BlbmVyIj48aW5wdXQgdHlwZT0iY2hlY2tib3giIGNoZWNrZWQ9ImNoZWNrZWQiIG9uY2hhbmdlPSJsaW5rY29va2llKCkiIG9uY2xpY2s9ImxpbmtvcGVuZXIodGhpcy5jaGVja2VkKSIgaWQ9ImxpbmtzbmV3d2luMSIgLz4gPGxhYmVsIGZvcj0ibGlua3NuZXd3aW4xIj5UcmVmZmVyIGluIG5ldWVtIEZlbnN0ZXIgJm91bWw7ZmZuZW4/IDxcL2xhYmVsPjxcL3A+PFwvZm9ybT5cJyk7Cn0gZWxzZSB7CiAgIGRvY3VtZW50LndyaXRlIChcJzxmb3JtIGFjdGlvbj0iIj48cCBjbGFzcz0ibGlua29wZW5lciI+PGlucHV0IHR5cGU9ImNoZWNrYm94IiBvbmNoYW5nZT0ibGlua2Nvb2tpZSgpIiBvbmNsaWNrPSJsaW5rb3BlbmVyKHRoaXMuY2hlY2tlZCkiIGlkPSJsaW5rc25ld3dpbjEiIC8+IDxsYWJlbCBmb3I9ImxpbmtzbmV3d2luMSI+VHJlZmZlciBpbiBuZXVlbSBGZW5zdGVyICZvdW1sO2ZmbmVuPyA8XC9sYWJlbD48XC9wPjxcL2Zvcm0+XCcpOwp9Ci8qIF1dPiAqLwo8L3NjcmlwdD4KJzsKfQoKICAgICAgICAgICAgJGxpc3RfYXJ0PSJ1bCI7CiAgICAgICAgICAgIGlmICgkbnVtX2xpc3QpJGxpc3RfYXJ0PSJvbCBzdGFydD0kbmV4dCI7CgogICAgICAgICAgICAvLyB1bSBYTUwgRmVobGVyIChIVE1MIFRpZHkgV2FybnVuZ2VuKSB6dSB1bnRlcmJpbmRlbjoKICAgICAgICAgICAgLy8gaHR0cDovL3d3dy50aW1yZWV2ZXMuZGUvbmV1L3dlYmRlc2lnbi93ZWItMjAucGhwCiAgICAgICAgICAgICRzdWNobXVzdGVyID0gJy8mKD8hKFthLXpBLVpdezIsN318I1xkK3wjeFswLTlhLWZBLUZdKyk7KS9pJzsKICAgICAgICAgICAgJGVyc2V0enVuZyA9ICcmYW1wOyc7CiAgICAgICAgICAgICRhdXNnYWJlID0gcHJlZ19yZXBsYWNlKCRzdWNobXVzdGVyLCAkZXJzZXR6dW5nLCAkYXVzZ2FiZSk7CgogICAgICAgICAgICBpZiAoJGlmcmFtZSAhPT0gdHJ1ZSkgeyAKICAgICAgICAgICAgICAgaWYgKCRudW1fbGlzdCkgewogICAgICAgICAgICAgICAgICBlY2hvICJcbjxvbCBzdGFydD0nIi4kbmV4dDEuIic+XG4iLiRhdXNnYWJlLiI8L29sPlxuIjsKICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgZWNobyAiXG48dWw+XG4iLiRhdXNnYWJlLiI8L3VsPlxuIjsKICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICBlY2hvICJcbiIuJGF1c2dhYmUuIlxuIjsKICAgICAgICAgICAgfQoKLy8gICAgICBpZiAoJG5leHQgPCAoJGZvdW5kIC0gJGFuel9kYXQpKSB7CiAgICAgIAogICAgICAgICBpZiAoJG1ldGhvZCA9PSAiR0VUIikgewogICAgICAgICAgICAvL25leHQgcmF1cywgd2VpbHMgc29uc3QgeC1tYWwgYW5nZWhhZW5ndCB3aXJkOgogICAgICAgICAgICAkcXVlcnlzdHJpbmcgPSAiIjsKICAgICAgICAgICAgaWYoaXNzZXQoJF9TRVJWRVJbIlFVRVJZX1NUUklORyJdKSkgeyAKICAgICAgICAgICAgICAgJHF1ZXJ5c3RyaW5nID0gJF9TRVJWRVJbIlFVRVJZX1NUUklORyJdOyAKICAgICAgICAgICAgICAgJGZpcnN0cXVlcnkgPSBzdHJwb3MoJHF1ZXJ5c3RyaW5nLCImbmV4dCIpOwogICAgICAgICAgICAgICBpZiAoJGZpcnN0cXVlcnkgIT09IGZhbHNlKSB7IAogICAgICAgICAgICAgICAgICAkcXVlcnlzdHJpbmcgPSBzdWJzdHIoJHF1ZXJ5c3RyaW5nLDAsJGZpcnN0cXVlcnkpOyAKICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgkJCQoJCQkkcHJldmlvdXMgPSAkd2VpdGVyIC0gKCRhbnpfZGF0ICogMik7IAoJCQkKICAgICAgICAgICAgJHF1ZXJ5c3RyaW5nID0gc3RyX3JlcGxhY2UoIiYiLCImYW1wOyIsJHF1ZXJ5c3RyaW5nKTsKICAgICAgICAgICAgCgkJCWVjaG8gJzxwIGNsYXNzPSJ3ZWl0ZXIiPic7CgkJCQoJCQlpZiAoJG5leHQgPj0gJGFuel9kYXQpIHsgCgkJCQllY2hvICc8YSBocmVmPSInLmJhc2VuYW1lKCRfU0VSVkVSWyJQSFBfU0VMRiJdKS4nPycuJHF1ZXJ5c3RyaW5nLicmYW1wO25leHQ9Jy4kcHJldmlvdXMuJyI+Jy4kenVydWVja3R4dC4nPC9hPic7CgkJCX0KCQkJCgkJCWlmICgkbmV4dCA+PSAkYW56X2RhdCAmJiAkbmV4dCA8ICgkZm91bmQgLSAkYW56X2RhdCkpIHsKCQkJCWVjaG8gJyB8ICc7CgkJCX0KCQkJCgkJCWlmICgkbmV4dCA8ICgkZm91bmQgLSAkYW56X2RhdCkpIHsKCQkJCWVjaG8gJzxhIGhyZWY9IicuYmFzZW5hbWUoJF9TRVJWRVJbIlBIUF9TRUxGIl0pLic/Jy4kcXVlcnlzdHJpbmcuJyZhbXA7bmV4dD0nLiR3ZWl0ZXIuJyI+Jy4kd2VpdGVydHh0Lic8L2E+JzsKCQkJfQoJCQllY2hvJzwvcD4nOwogICAgICAgICB9Ci8vICAgICAgfQoJfQp9CmVsc2Uge2VjaG8gJG1pbmxlbmd0aDt9Cn0KCmlmKCRmb3VuZCA+PSAiMSIgfHwgIWlzc2V0KCRfR0VUWyJxIl0pICkgewoJJHVsc3RhcnQgPSAiJHNlYXJjaHRpcDA8ZGl2IGlkPSdzdWNodGlwcHMnICBjbGFzcz0na2xhcHBlbicgPlxuPHVsPlxuIjsKfSBlbHNlIHsKCSR1bHN0YXJ0ID0gIiRzZWFyY2h0aXAwPGRpdiBpZD0nc3VjaHRpcHBzJyA+XG48dWw+XG4iOwkKfQoKJHVsZW5kID0gIjwvdWw+XG48L2Rpdj5cbiI7CgppZiAoJHRpcHBzKSB7JHNlYXJjaHRpcCA9ICR1bHN0YXJ0LiRzZWFyY2h0aXAxLiRzZWFyY2h0aXAyLiRzZWFyY2h0aXAzLiRzZWFyY2h0aXAzMS4kc2VhcmNodGlwM29yLiRzZWFyY2h0aXA0LiR1bGVuZDsgfWVsc2UgeyRzZWFyY2h0aXAgPSIiO30KCgplY2hvICRzZWFyY2h0aXA7CgokbXRpbWUgPSBtaWNyb3RpbWUoKTsgJG10aW1lID0gZXhwbG9kZSggJyAnLCAkbXRpbWUpOyAkbXRpbWUgPSAkbXRpbWVbMV0gKyAkbXRpbWVbMF07CiRzdWNoX2VuZGUgPSAkbXRpbWU7CiR0aW1lX2dlc2FtdCA9ICRzdWNoX2VuZGUgLSAkc3VjaF9zdGFydDsKCmVjaG8gIjxkaXYgaWQ9XCJzZWFyY2hmb290ZXJcIj48cD4iOwoKaWYgKGlzc2V0KCRhbnphaGxkYXQpKXsKCSR6ZGF0ID0gJGFuemFobGRhdDsKCX0gZWxzZSB7CgkkemRhdCA9ICJBbnphaGwgZHVyY2hzdWNodGVyIERhdGVpZW46ICI7Cn0KCmlmICgkemFobHplaWcgJiYgJGZvdW5kID4gMCkgZWNobyAkemRhdC4kZHVyY2hzdWNodC4iPGJyIC8+IjsKCmlmICgkZm91bmQgPiAwICkgewoJaWYgKGlzc2V0KCR0aW1ldHh0KSl7CgkJJHRpbWVoaW53ZWlzID0gJHRpbWV0eHQ7Cgl9IGVsc2UgewoJCSR0aW1laGlud2VpcyA9ICJTdWNoZSBhdXNnZWYmdXVtbDtocnQgaW4gIjsKCX0KCglpZigkZGF1ZXIpIHsKCSAgICAgIGVjaG8gIiR0aW1laGlud2VpcyIubnVtYmVyX2Zvcm1hdCgkdGltZV9nZXNhbXQsMiwnLCcsJy4nKS4iICRzdWNoZGF1ZXIgJHZlcnNpb25cbiI7Cgl9IGVsc2UgewoJICAgICAgZWNobyAiXG4kdmVyc2lvblxuIjsKCX0KfSBlbHNlIHsKICAgICAgZWNobyAiXG4kdmVyc2lvblxuIjsKfQplY2hvICI8L3A+PC9kaXY+IjsKZWNobyAkd2R3Owo=";@eval(base64_decode($NCiR0aW1lX29sZCA9IDA7IC8vIGb8ciBkaWUgRm9ydHNjaHJpdHRzYW56ZWlnZQNCiR0aW1lX29sZCA9IDA7IC8vIGb8ciBkaWUgRm9ydHNjaHJpdHRzYW56ZWlnZQ));

?>